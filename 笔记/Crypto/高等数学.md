# 高等数学

我也真是个人才，高数都没学竟敢去学抽象代数。之前觉得高数没用，极限，积分什么的ctf用不上（想当初我是为了搞crypto才学的数学，我对数学一点兴趣都没有。结果现在数学兴趣起来了crypto还是不会。当然数学也不会。我到底在干什么？）。后面发现高数内容很多，有些东西是有用的。好的我来了。

课程地址：https://www.bilibili.com/video/BV1Eb411u7Fw

## 1.1 映射

映射：对X，Y两个非空集合，有法则f，使对X中的每个元素x，都有唯一的y与之对应。则f叫做映射，记做 $f:X\rightarrow Y$ .y叫做像，与之对应的x叫做原像。X叫定义域，记作 $D_f$ ;像的集合叫做值域，记做 $R_f$ 。 $R_f\in Y,R_f\not ={Y}$

映射三要素：
1. X，f, $R_f$
2. $x\in X$ ，对应的y是唯一的。两个x可以对应同一个y，但是一个x不能对应两个y

满射： $R_f=Y$ 。单射： $x_1\not ={x_2},f(x_1)\not ={f(x_2)}$ .一一映射：单射+满射。逆映射：设 $f:X\rightarrow Y$ 为单射。对于每个 $y\in R_f$ ，都有唯一的 $x\in X$ 满足 $f(x)=y$ .逆映射为 $g:R_f\rightarrow X$ .记做 $f^{-1}$ . $D_{f^{-1}}=R_f,R_{f^{-1}}=X$

复合映射：有 $g:X\rightarrow Y_1$ 和 $f:Y_2\rightarrow Z$ ，且 $Y_1\in Y_2$ .取 $x\in X$ ， $f(g(x))\in Z$ 。记做 $f\circ g:X\rightarrow Z$ . $R_g\subset D_f$

## 1.1 函数

函数是数集到数集的映射。有 $D\subset R$ （R为实数域，区别于接下来的Range R）, $f:D\rightarrow R$ .定义函数 $y=f(x),x\in D$ .x叫自变量，y叫因变量，定义域记为D或 $D_f$ .值域记为 $R_f=f(D)$

构成函数的两要素：定义域 $D_f$ 以及对应规则f

[x]表示不超过x的最大整数

## 1.1 函数的几种特性

1. 有界性
- 上界： $\exists k_1,f(a)\leq k_1$ . $k_1$ 叫f(x)在x上的一个上界。上界不唯一，可以有无穷个
- 下界： $\exists k_2,f(a)\geq k_1$ . $k_2$ 叫f(x)在x上的一个下界。下界不唯一，可以有无穷个
- 有界：存在正数M， $|f(x)|\leq M$ （ $-M\leq f(x)\leq M$ ）。有界 $\Leftrightarrow$ 既有上界也有下界
- 无界：任给正数M， $\exists x_1\in X$ 使得 $|f(x_1)|$ > M
2. 单调性
- 单调增： $x_1$ < $x_2$ ， $f(x_1)$ < $f(x_2)$
- 单调减： $x_1$ < $x_2$ ， $f(x_1)$ > $f(x_2)$
3. 奇偶性：D（定义域）关于原点对称
- 偶： f(-x)=f(x).图像关于y轴对称
- 奇： f(-x)=-f(x)。图像关于原点对称
4. 周期性：存在正数l使得f(x+l)=f(x),那么函数就叫周期函数，l就叫周期。通常所说的周期指的都是最小正周期
- 并非每个周期函数都有最小周期，比如D(x)，其定义为当x为有理数时等于1，x为无理数时等于0。该函数任何正有理数r都是周期，不存在最小的正有理数周期

## 1.1 反函数 复合函数 初等函数

设 $f:D\rightarrow f(D)$ 为单射，则 $f^{-1}=f(D)\rightarrow D$ 就叫f的反函数。若f单调增/减且单射，则 $f^{-1}$ 一定存在且也是单调增/减。f和 $f^{-1}$ 关于y=x对称

复合函数：y=f(t),t=g(x).y=(g(x))就是复合函数，t为中间变量。g的值域必须落在f的定义域里

运算：有f(x)和g(x)，两者结合在一起的定义域为 $D=D_f\cap D_g\not ={\emptyset}$
- $(f\pm g)(x)=f(x)\pm g(x)$
- $(f\*g)(x)=f(x)\*g(x)$
- $(\frac{f}{g})(x)=\frac{f(x)}{g(x)},g(x)\not ={0}$

例题：任给一个函数f(x)，其定义域为(-l,l)，如何把f(x)表示成g(x)+h(x)，同时g(x)为偶函数，h(x)为奇函数？

可以利用函数的特性构造方程组。变换一下，得到f(-x)=g(x)-h(x).结合f(x)=g(x)+h(x)，得到 $g(x)=\frac{1}{2}[f(x)+f(-x)],h(x)=\frac{1}{2}[f(x)-f(-x)]$

初等函数：
- 幂函数： $y=x^{\mu}$
- 指数函数： $y=a^x$
- 对数函数： $y=log_ax$ .若底数是e则称为 $lnx$
- 三角、反三角函数

初等函数为基本初等函数经过有限次的运算和有限次的复合的函数

## 1.2 数列极限的定义

数列： $x_1,x_2,x_3,...,x_n...$ 就叫一个数列，记做{ $x_n$ }。每个数叫项， $x_n$叫一般项，也叫通项

数列极限：设{ $x_n$ }是数列， $\forall\epsilon$ > 0, $\exists N$ ，使得n > N时， $|x_n-a|$ < $\epsilon$ .a就是极限

## 1.2 收敛数列的性质

收敛数列是有极限的数列；发散数列就是没有极限的数列。收敛数列 $\Leftrightarrow$ 数列有极限。收敛数列的极限唯一,且一定有界。但有界不一定收敛

收敛数列具有保号性。数列{ $x_n$ }的极限是a，且a大于0（小于0）。 $\exists N$ > 0，当n > N时， $x_n$ > 0（< 0）

推论：若数列从某项起 $x_n\geq 0(\leq 0)$，且 $x_n$ 的极限为a，则a大于等于0(小于等于0)

收敛数列的任一子数列收敛于同一极限。子数列为原数列里随意取数得到的数列（但是要保持顺序,类似subsequence的定义）。数列{ $x_n$ }的子数列记为{ $x_{n_k}$ }。若数列有两个子数列收敛于不同的极限，则原数列一定发散

## 反三角函数介绍

sin： $x\in(-\infty,\infty),y\in [-1,1]$

arcsin: $x\in[-1,1],y\in[-\frac{\pi}{2},\frac{\pi}{2}]$

cos: $x\in(-\infty,\infty),y\in [-1,1]$

arccos: $x\in[-1,1],y\in[0,\pi]$

arctan: $x\in(-\infty,\infty),y\in (-\frac{\pi}{2},\frac{\pi}{2})$

arccotangent(cot x=cos x/sin x): $x\in(-\infty,\infty),y\in(0,\pi)$

sec(1/cos),cec(1/sin)

## 1.3 函数极限

$x\rightarrow a$ (有限数)， $f(x)\rightarrow b$ .f(x)在 $x_0$ 的去心邻域（ $x_0$ 的邻域除去 $x_0$ ，邻域是指 $x_0$ 的附近区域）内有定义. $\exists A$ , $\forall\epsilon$ > 0, $\exists\delta$ > 0,使得0 < $|x-x_0|$ < $\delta$ 时,|f(x)-A| < $\epsilon$ 。就叫 $lim_{x\rightarrow x_0}f(x)=A$ ,或者说 $f(x)\rightarrow A(x\rightarrow x_0)$ .A就是函数的极限，任给大于0的 $\epsilon$ ,是函数值和它的极限之间的距离.常数的极限等于常数

左极限： $lim_{x\rightarrow x_0^-}f(x)=A$ .右极限： $lim_{x\rightarrow x_0^+}f(x)=A$ 。左极限表示从左边逼近，右极限表示从右边逼近。 $x\rightarrow x_0,f(x)$ 极限存在 $\Leftrightarrow$ 左右极限均存在且相等。注意函数在 $x_0$ 处有没有定义和在 $x_0$ 处有没有极限没有关系

当 $x\rightarrow\infty$ , $\forall\epsilon$ > 0, $\exists$ 正数X，使得|x| > X时,|f(x)-A| < $\epsilon$ 。就叫 $lim_{x\rightarrow \infty}f(x)=A$ 。注意有限数的 $\delta$ 和无限的X都不是唯一的，但是 $\delta$ 越小越好，X越大越好

性质：
1. 当x趋于 $x_0$ 时，函数极限是唯一的
2. 如果 $lim_{x\rightarrow x_0}f(x)=A$ , $\exists M$ > 0, $\delta$ > 0,使得0 < $|x-x_0|$ < $\delta$ 时， $|f(x)|\leq M$ ,就叫局部有界性。M为界， $x-x_0$ 就是范围
3. 局部保号性：如果 $lim_{x\rightarrow x_0}f(x)=A$ ,并且A大于0（或者小于）。那么存在 $\delta$ > 0,使得0 < $|x-x_0|$ < $\delta$ 时，f(x) > 0
4. 如果存在 $lim_{x\rightarrow x_0}f(x)=A$ （函数极限），{ $x_n$ }是趋于 $x_0$ 的一个数列，那么 $lim_{n\rightarrow\infty}f(x_n)=lim_{x\rightarrow x_0}f(x)$ （前者为数列极限）。但是反着来看不成立，数列有极限不代表函数有极限，也不一定相等。可以将数列看成函数自变量的子集，子集有极限不代表整个集合就有极限；但是整个集合有极限其子集肯定也是有的

## 1.4 无穷小与无穷大

无穷小：趋于0叫无穷小。注意很小的负数不是无穷小，而是无穷大；很小的小数也不是无穷小，它是确定的而不是趋于0.可以从正数趋于0，也可以从负数。本身是0也是无穷小。具体定义为， $x\rightarrow x_0(x\rightarrow\infty)$ 的极限为0，就叫f(x)是 $x\rightarrow x_0(x\rightarrow\infty)$ 时趋于无穷小。无穷小+无穷小，无穷小-无穷小，无穷小乘无穷小，任意常数c倍的无穷小，都是无穷小

无穷大：趋于正无穷或者负无穷，统称为无穷大。 $lim_{x\rightarrow x_0(x\rightarrow \infty)}f(x)=\infty$ .无穷大+无穷大（无穷大-无穷大）不一定是无穷大，因为可能一个是正无穷，一个是负无穷； $\frac{\infty}{\infty}$ ，无穷小乘无穷大不确定；无穷大乘无穷大，任意非0常数c倍的无穷大都是无穷大

f(x)无穷大（小），那么 $\frac{1}{f(x)}$ 无穷小（大）

## 1.5 极限运算准则

定理：
1. 有限个无穷小的和还是无穷小
2. 有界函数与无穷小的乘积是无穷小，有限个无穷小的乘积还是无穷小
3. lim f(x)=A,lim g(x)=B(这里lim没具体写趋于的数，表示两者的x只要趋于的是同一个东西就成立)，则：
- $lim[f(x)\pm g(x)]=lim\space f(x)\pm lim\space g(x)=A\pm B$
- $lim[f(x)\* g(x)]=lim\space f(x)\* lim\space g(x)$ .有限个相加相乘都成立
- $lim\frac{f(x)}{g(x)}=\frac{lim\space f(x)}{lim\space g(x)},B\not ={0}$
- lim f(x)存在，那么lim[cf(x)]=clim f(x)
- $lim[f(x)]^n=[lim\space f(x)]^n$
4. 存在两个都趋于无穷大的数列的极限分别为A和B，计算方法和定理三的前三条相同
5. $\phi(x)\geq\psi(x)$ ,则 $lim\phi(x)\geq lim\psi(x)$

$lim_{x\rightarrow\infty}\frac{a_0x^m...}{b_0x^n...}$ （x趋于极限，多项式的比值的极限）有3种情况：
- m=n， $\frac{a_0}{b_0}$
- n > m,0
- m > n, $\infty$

$lim_{x\rightarrow x_0}f[g(x)]=lim_{u\rightarrow u_0}f(u)$ ，若里面的函数有极限，直接带进去即可

## 1.6 极限存在准则 两个重要极限

夹逼准则（草什么鬼名字，之前接触好像叫三明治准则）:两个数列{ $x_n$ },{ $y_n$ }，若满足：
- $\exists n_0\in N$ ,使得n > $n_0$ 时， $y_n\leq x_n\leq z_n$
- $lim_{n\rightarrow\infty}y_n=lim_{n\rightarrow\infty}z_n=a$

则 $lim_{n\rightarrow\infty}x_n=a$

其他准则：若 $g(x)\leq f(x)\leq h(x)$ ，且 $lim\space g(x)=lim\space h(x)=A$ ,则 $lim\space f(x)=A$ .其实就是上面定理的数列换成函数

单调有界数列必有极限。收敛必有界，有界不一定收敛

重要极限：
1. $lim_{x\rightarrow 0}\frac{sin(x)}{x}=1$ 。这个x可以是整体，比如 $lim_{x\rightarrow 1}\frac{sin(x^2-1)}{x^2-1}=lim_{x^2-1\rightarrow 0}\frac{sin(x^2-1)}{x^2-1}=1$ 。倒过来x比sin x也是成立的。另外，当x趋于0时，不仅sin x比x是1，arcsin x，tan x也是
2. $lim_{x\rightarrow\infty}(1+\frac{1}{x})^x=e$ .同样，x可以是整体。比如 $lim_{x\rightarrow\infty}(1-\frac{1}{x})^x=lim_{x\rightarrow\infty}[(1+\frac{1}{-x})^{-x}]^{-1}=e^{-1}$ 。衍生结论： $lim_{x\rightarrow 0}(1+x)^\frac{1}{x}=e$

{ $x_n$ }收敛 $\Leftrightarrow\forall\epsilon,\exists N$ ,当m大于N，n大于N时，有 $|x_n-x_m|$ < $\epsilon$

## 1.7 无穷小的比较

- $lim\frac{\beta}{\alpha}=0$ ,则 $\beta$ 是 $\alpha$ 的高阶无穷小，记做 $\beta=0(\alpha)$
- $lim\frac{\beta}{\alpha}=\infty$ ,则 $\beta$ 是 $\alpha$ 的低阶无穷小
- $lim\frac{\beta}{\alpha}=c\not ={0}$ ，则两者是同阶无穷小
- $lim\frac{\beta}{\alpha^k}=c\not ={0}$ ，则 $\beta$ 是 $\alpha$ 的k阶无穷小
- $lim\frac{\beta}{\alpha}=1$ ,则 $\beta$ 和 $\alpha$ 是等价无穷小，记做 $\beta～\alpha$ .比如sin x和x; $\sqrt[n]{1+x}-1$ 和 $\frac{1}{n}x$ ; cos x-1 和 $-\frac{1}{2}x^2$ 就是等价无穷小，求极限时可以替换(注意x仅当趋于0时等价)

高阶低阶通俗来讲就是“谁趋近于0的速度更快”。高阶就是 $\beta$ 快，低阶就是 $\alpha$ 快

定理：
1. $\beta$ 与 $\alpha$ 等价 $\Leftrightarrow\beta=\alpha+0(\alpha)$
2. $\alpha～\overline{\alpha},\beta～\overline{\beta}$ ,且 $lim\frac{\overline{\beta}}{\overline{\alpha}}$ 存在，则 $lim\frac{\beta}{\alpha}=lim\frac{\overline{\beta}}{\overline{\alpha}}$
- 求两个无穷小比的极限时，分子和分母可用等价无穷小替换。只有比可以替换，乘，除都不行
- 如果分子或分母是若干因子的乘积，那么可对其中一个或几个因子作等价无穷小替换。注意相加不行

## 1.8 函数的连续性与间断点

增量（改变量,因此不一定是正的，还能是负的）： $\Delta y=f(x_0+\Delta x)-f(x_0)$

连续： $lim_{\Delta x\rightarrow 0}\Delta y=lim_{\Delta x\rightarrow 0}(f(x_0+\Delta x)-f(x_0))=0$ 或 $lim_{x\rightarrow x_0}f(x)=f(x_0)$ .人话就是，需要满足三个条件：
- 在 $x_0$ 处有极限
- 在 $x_0$ 处有定义
- 在 $x_0$ 处极限值等于函数值

左连续： $lim_{x\rightarrow x_0^-}f(x)=f(x_0)$

右连续： $lim_{x\rightarrow x_0^+}f(x)=f(x_0)$

即从左边逼近和从右边逼近。连续 $\Leftrightarrow$ 左右均连续。连续的几何意义是一个连续不间断的图像。能拿笔在纸上一笔画出一个函数就是连续

一些三角函数等式(积化和差，和差化积。两者是逆向关系)：
- $cos(\alpha+\beta)=cos(\alpha)cos(\beta)-sin(\alpha)sin(\beta)$
- $cos(\alpha-\beta)=cos(\alpha)cos(\beta)+sin(\alpha)sin(\beta)$
- $sin(\alpha\pm\beta)=sin(\alpha)cos(\beta)\pm cos(\alpha)sin(\beta)$
- $sin(\alpha)cos(\beta)=\frac{1}{2}[sin(\alpha+\beta)+sin(\alpha-\beta)]$
- $cos(\alpha)cos(\beta)=\frac{1}{2}[cos(\alpha+\beta)+cos(\alpha-\beta)]$
- $sin(\alpha)sin(\beta)=-\frac{1}{2}[cos(\alpha+\beta)-cos(\alpha-\beta)]$
- $sin(\alpha)+sin(\beta)=2sin(\frac{\alpha+\beta}{2})cos(\frac{\alpha-\beta}{2})$
- $cos(\alpha)+cos(\beta)=2cos(\frac{\alpha+\beta}{2})cos(\frac{\alpha-\beta}{2})$
- $cos(\alpha)-cos(\beta)=-2sin(\frac{\alpha+\beta}{2})sin(\frac{\alpha-\beta}{2})$

间断点（其实就是把连续的三个条件否定）：
- 在 $x_0$ 处无定义。此为无穷间断点
- $lim_{x\rightarrow x_0}f(x)$ 不存在。此为振荡间断点
- $lim_{x\rightarrow x_0}f(x)\not ={f(x)}$ 。此为可去间断点。还有一种跳跃间断点，表现为图像从中间分为上下两半

第一类间断点：左右极限都存在（无需相等）。有可去、跳跃间断点

第一类间断点：左右极限至少一个不存在。有振荡、无穷间断点

## 1.10 闭区间连续函数的性质2

若f(x)在[a,b]上连续（前两个需要在 https://www.bilibili.com/video/BV1UW411k7Jv/?p=13&t=2020 找到），则有：
- 有界性：f(x)在a到b上一定有界
- 最值性：必有最大值和最小值
- 介值定理：若f(a)=A,f(b)=B且不同，那么对于在A和B之间的C，至少存在一点 $\xi\in(a,b)$ ，使得 $f(\xi)=C$

## 2.1 导数定义

导数的切线定义（还有个速度定义，不过和这个差不多）：在函数上取一点x；再取一点大于x的 $x_0$ .此时 $lim_{x\rightarrow x_0}\frac{f(x)-f(x_0)}{x-x_0}$ 等同于 $lim_{\Delta x\rightarrow 0}\frac{\Delta y}{\Delta x}$ ,表示x处的变化量

导数的标准定义：y=f(x)在 $x_0$ 的某个邻域内有定义（包含 $x_0$ ,不是极限时的去心邻域）。在 $x_0$ 处取 $\Delta x$ ,就有 $\Delta y=f(x_0+\Delta x)-f(x_0)$ 。如果 $f'(x_0)=lim_{\Delta x\rightarrow 0}\frac{\Delta y}{\Delta x}=lim_{\Delta x\rightarrow 0}\frac{f(x_0+\Delta x)-f(x_0)}{\Delta x}$ 存在，就叫叫 $x_0$ 点处可导，极限值即为导数值,记做 $f'(x_0)$ ,也能写做 $y'|_{x=x_0}$ (导函数)，或者 $\frac{dy}{dx}|_{x=x_0}$ ,再或者 $\frac{df(x)}{dx}|_{x=x_0}$ .注意后面那种表示方式不是分数，代表y函数对x求导，只不过多加了个d。它们是一体的

## 2.1 常用求导公式举例

二项式定理： $(x+y)^n=C^n_nx^n+C^{n-1}_nx^{n-1}y+C^{n-2}_nx^{n-2}y^2+...+C^0_ny^n$ 。中间的系数也可以由杨辉三角得到

1. 常数求导等于0，x求导等于1
2. $x^n$ (n为正整数)求导有两种情况：
- n=1则结果为1
- n > 1则结果为 $nx^{n-1}$
3. $x^{\mu}$ ( $\mu$ 为实数)： $(x^{\mu})'=\mu x^{\mu-1}$ 。和上面一个一样结论
4. 三角函数求导：
- (sin x)'=cos x
- (cos x)'=-sin x
5. $(a^x)'=a^xln(a)$
6. $(log_ax)'=\frac{1}{xln(a)}$ , $(lnx)'=\frac{1}{x}$

## 2.1 单侧导数

左导数（从左边逼近）： $f'_{-x_0}=lim_{h\rightarrow 0^-}\frac{f(x_0+h)-f(x_0)}{h}$

右导数（从右边逼近）： $f'_{+x_0}=lim_{h\rightarrow 0^+}\frac{f(x_0+h)-f(x_0)}{h}$

某点可导 $\Leftrightarrow$ 左右导数存在且相等

## 2.1 导数的几何含义

图像光滑（图像切线不能垂直于x轴）

过点 $M(x_0,y_0)$ 的切线： $y-y_0=f'(x_0)(x-x_0)$ 。斜率就是其导数

法线：与切线垂直的线。若切线的斜率是 $f'(x_0)$ ，发现的斜率就是 $-\frac{1}{f'(x_0)}$ . $y-y_0=-\frac{1}{f'(x_0)}(x-x_0)$

## 2.1 可导与连续的关系

可导一定连续，但连续不一定可导

## 2.2 求导法则（和差积商）

- (u+v)'=u'+v'
- (u-v)'=u'-v'
- (uv)'=u'v+uv'。这里两者都是函数，但是有一个是常数也成立。(cv)'=cv'
- $(\frac{u}{v})'=\frac{u'v-uv'}{v^2}$
- y=tan x, $y'=sec^2x$
- y=sec x, $y'=sec(x)\tan(x)$
- y=sin x, $y'=cos(x)$
- y=cos x, $y'=-sin(x)$
- y=cot x, $y'=-csc^2x$
- y=csc x, $y'=-csc(x)cot(x)$

## 2.2 反函数的求导法则

x=f(y)在 $I_y$ 内单调且可导， $f'(y)\not ={0}$ 。其反函数的导数为 $[f^{-1}(x)]'=\frac{1}{f'(y)}$ 。反函数的导数＝原函数的导数的倒数，也可以说 $\frac{dy}{dx}=\frac{1}{\frac{dx}{dy}}$

一些函数的求导结果：
- (arcsin x)'= $\frac{1}{\sqrt{1-x^2}}$
- (arccos x)'= $-\frac{1}{\sqrt{1-x^2}}$
- (arctan x)'= $\frac{1}{1+x^2}$
- (arccot x)'= $-\frac{1}{1+x^2}$
- $(log_ax)'=\frac{1}{xlna}$

## 复合函数求导法则

u=g(x)在x处可导，y=f(u)在u处可导，那么y=f[g(x)]也可导。 $\frac{dy}{dx}=f'(u)g'(x)$ 。或者写做 $\frac{dy}{dx}=\frac{dy}{du}\*\frac{du}{dx}$ 。多层的复合函数也是这个道理

$y=e^{x^3}$ ,求 $\frac{dy}{dx}$ 时，设 $y=e^u,u=x^3$ ,分别求导再乘起来： $e^u3x^2$ ，u再替换回去，最终结果 $3x^2e^{x^3}$

也可以用简化版的洋葱法则。不要管什么du，dx，直接从最外层到最内层依次求导，然后相乘。比如 $y=e^{sin\frac{1}{x}}$ ，最外层是 $e^n$ (n为替代的变量，不重要)，求导数就是 $e^{sin\frac{1}{x}}$ ；然后下一层是 $sin\frac{1}{x}$ ，求导为 $cos\frac{1}{x}$ ，最后一层是 $\frac{1}{x}$ ，导数为 $-\frac{1}{x^2}$ 。所以最终结果为 $e^{sin\frac{1}{x}}cos\frac{1}{x}(-\frac{1}{x^2})$

有些时候如果看不出来函数的层级就要用别的方法了。如 $y=x^x$ ,转换成 $e^{lnx^x}$ 即可使用洋葱法则（这种 $y=u^v$ 的两边同时求对数即可）

## 复合函数求导（补充）

之前那题 $y=x^x$ 还能这么做：两边同时取ln，得到ln y=x ln x，两边对x求导，得到 $\frac{1}{y}y'$ =ln x+1(这里左边是隐函数求导，还没学)。最后把y移过去，得到 $y'=x^x(ln\space x+1)$

## 导数公式表

之前讲过，这里再记一遍，方便到时候回来查表。
1. (C)'=0
2. $(x^{\mu})'=\mu x^{\mu-1}$
3. 三角函数求导
- (sin x)'=cos x
- (cos x)'=-sin x
- (tan x)'= $sec^2x$
- (cot x)'= $-csc^2x$
- (sec x)'=sec x\*tan x
- (csc x)'=-csc x\*cot x
- $(arcsinx)'=\frac{1}{\sqrt{1-x^2}}$
- $(arccosx)'=-\frac{1}{\sqrt{1-x^2}}$
- $(arctanx)'=\frac{1}{1+x^2}$
- $(arccotx)'=-\frac{1}{1+x^2}$
4. $(a^x)'=a^xln\space a$
5. $(e^x)'=e^x$
6. $(log_ax)'=\frac{1}{xlna}$
7. $(lnx)'=\frac{1}{x}$

和差积商：
1. $(u\pm v)'=u'\pm v'$
2. (cu)'=cu'
3. (uv)'=u'v+uv'
- (uvw)'=u'vw+uv'w+uvw'
4. $(\frac{u}{v})'=\frac{u'v-uv'}{v^2}$

反函数： $\frac{dy}{dx}=\frac{1}{\frac{dx}{dy}}$

## 高阶导数

对一个函数求多次导数就叫高阶导数。一次导数记为 $y'=\frac{dy}{dx}$ ,两次导数记为 $y''=\frac{d}{dx}(\frac{dy}{dx})$ ,或者 $\frac{d^2y}{dx^2}$ ,以此类推。不过从4阶以上的导数就不写'了，记做 $y^{(4)}$

一些函数的n阶导数：
- $y=sin(x),y^{(n)}=sin(x+n\frac{\pi}{2})$
- $y=cos(x),y^{(n)}=cos(x+n\frac{\pi}{2})$
- $y=e^x,y^{(n)}=e^x$
- $(x^{\mu})^{(n)}=\mu(\mu-1)...(\mu-n-1)x^{\mu-n}$
- $(u\pm v)^{(n)}=u^{(n)}\pm v^{(n)}$
- $(u+v)^{(n)}=\Sigma_{k=0}^nC^k_nu^{n-k}v^k$
- $(uv)^{(n)}=\Sigma_{k=0}^nC^k_nu^{(n-k)}v^{(k)}$

## 隐函数求导

拿例题来看比较好理解。 $e^y+xy-e=0$ ，求 $\frac{dy}{dx}$ 。这里发现y没法单独提出来写成x的表达式，故需要进行隐函数求导（之前学的都是能提出来的，为显函数求导）。做法为两边同时对x求导，过程中谨记y=f(x)，是x的函数（只不过函数表达式写不出来）

$e^y$ 求导:首先 $e^y$ 整体是个函数，然后y又是x的函数，套复合函数求导的做法，得到 $e^y\*y'$

xy求导：x和y都是x的函数，这是个相乘求导。x求导为1，y求导为y，结果为y。那么整体结果为y+xy'

剩下的e求导是0，左边的0求导也是0.最后结果为 $e^yy'+y+xy'=0$ 。此时提出y'，跟解方程一样，得到 $y'=-\frac{y}{e^y+x}$ 。注意到结果里仍然有y，但是也没有更好的办法了，因为y写不成x的函数

高阶隐函数求导和普通求导差不多，这里简述一下。假设已求出一阶导 $y'=\frac{2}{2-cosy}$ ，此时再导一次就是二阶导： $y''=-\frac{2}{(2-cosy)^2}siny\frac{2}{2-cosy}=-\frac{4siny}{(2-cosy)^3}$ 。中间对2-cosy求导时，结果是siny\*y'。这里y'已知，直接带入即可

前面提过求ln对 $y=u^v$ 的题有奇效，还有另一种题也可以这么做： $y=\frac{ab}{cd}$

## 参数方程求导

若x和y均是t的函数且两者构成一个参数方程，求y对x的导数 $\frac{dy}{dx}$ 。因为两者都和t有关系，因此一阶导数为 $\frac{\frac{dy}{dt}}{\frac{dx}{dt}}$ 。假如是求二阶导，就先求出一阶导，然后二阶导： $\frac{d(\frac{dy}{dx})}{dx}=\frac{\frac{d(\frac{dy}{dx})}{dt}}{\frac{dx}{dt}}$ 。分子的 $\frac{d(\frac{dy}{dx})}{dt}$ 中的 $\frac{dy}{dx}$ 刚才已经求出来了，直接带入继续求对t的导即可

## 微分的定义

假设有 $x_0$ ，变化一个较小的值后得到 $x_0+\Delta x$ 。那么 $\Delta y=f(x_0+\Delta x)-f(x_0)$ 。微分问的就是当x发生一个很小的变化后，y会发生什么变化

举个例子，有 $y=x^2$ 。若将 $x_0$ 增加个 $\Delta x$ ，其 $\Delta y$ 为 $(x_0+\Delta x)^2-x_0^2=2x_0\Delta x+(\Delta x)^2$ 。容易看出当 $\Delta x$ 很小时， $(\Delta x)^2$ 也会很小，故为一个高阶无穷小，记做 $0(\Delta x)$ 。如果把 $2x_0$ 看成一个整体，记为A，那么 $\Delta y=A\Delta x+0(\Delta x)$ , $A\Delta x$ 为线性主部

引出微分定义：y=f(x)在某个范围内有定义， $x_0\rightarrow x_0+\Delta x$ .那么函数值变化量的精确值为 $\Delta y=f(x_0+\Delta x)-f(x_0)$ 。若其可表示成 $\Delta y=A\Delta x+0(\Delta x)$ 的话（A不依赖 $\Delta x$ ，只与x有关，相对于 $\Delta x$ 来说可以看作是常数），就叫y=f(x)在 $x_0$ 处可微。线性主部记为 $dy=A\Delta x$ ，为变化量的近似值，里面的A就是导数； $\Delta x$ 就是dx

微分和导数差不多，微分求的是dy,导数求的是 $\frac{dy}{dx}$ 。因此微分是总的变化量，导数是平均每个增加的x变化多少(变化率)

可微 $\Leftrightarrow$ 可导。dy=f'(x)dx。导数可以看做是微分的商，简称微商

## 基本微分公式与法则

微分的和差积商(本质就是dy=f(x)dx，理解了就不用记)：
- d(u+v)=du+dv
- d(cu)=cdu(c为常数)
- d(uv)=vdu+udv
- $d(\frac{u}{v})=\frac{vdu-udv}{v^2}$

复合函数微分：若y=f(u),u=g(x),那么 $dy=y'_xdx=f'(u)g'(x)dx=f'(u)du$ 。因为y是u的函数，u又是x的函数，最终也是x的函数。 $y'_x$ 表示y对x求导，因此应用链式法则。这个公式也被称为微分形式不变性，因为当y直接是x的函数时，式子能成立；y间接是x的函数时，式子也能成立

## 微分在近似计算中的应用

$\Delta y=f(x_0+\Delta x)-f(x_0)$ 为精确值; $dy=f'(x_0)\Delta x$ 为近似值。 $\Delta y\approx dy$ ，即 $f(x_0+\Delta x)\approx f'(x_0)\Delta x+f(x_0)$

用微分公式时记得 $\Delta x$ 取越小越好，太大了误差也大，就没有意义了

以下公式均基于 $x\rightarrow 0$
1. $(1+x)^{\alpha}\approx 1+\alpha x$
2. $sinx\approx x$
3. $tanx\approx x$
4. $e^x\approx 1+x$
5. $ln(1+x)\approx x$

意义：用x的多项式近似复杂函数

## 微分中值定理

费马引理：f(x)在 $x_0$ 的邻域 $U(x_0)$ 有定义，并且在 $x_0$ 处可导。如果 $f(x)\leq f(x_0),\forall x\in U(x_0)$ （大于等于也成立），则 $f'(x_0)=0$ 。简单来说，极值点处如果可导，那么导数为0

驻点：导数为0的点。驻点不一定是极值点

罗尔定理：f(x)满足：
1. 在[a,b]连续
2. 在(a,b)可导
3. f(a)=f(b)

则至少 $\exists\xi\in(a,b),f'(\xi)=0$

拉格朗日中值定理：函数满足：
1. [a,b]连续
2. (a,b)可导

则(a,b)至少有一点 $\xi$ ，使得 $f(b)-f(a)=f'(\xi)(b-a)$ 。罗尔定理是拉格朗日中值定理的一种特殊情况

如果f(x)在区间I上连续，在I内可导并且导数恒为0，则f(x)是常数

## 柯西中值定理

若f(x)和F(x)满足：
1. [a,b]连续
2. (a,b)可导
3. $\forall x\in(a,b),F'(x)\not ={0}$

那么至少有一点 $\xi$ 满足 $\frac{f(b)-f(a)}{F(b)-F(a)}=\frac{f'(\xi)}{F'(\xi)}$

拉格朗日定理就是柯西中值定理中F(x)=x的特殊情况

## 洛必达法则

洛必达法则用来处理 $\frac{0}{0}$ 或 $\frac{\infty}{\infty}$ 类型的极限

定理1条件：
1. 当 $x\rightarrow a$ 时， $f(x)\rightarrow 0,F(x)\rightarrow 0$
2. 在a的去心邻域内，f'(x)和F'(x)都存在，且 $F'(x)\not ={0}$
3. $lim_{x\rightarrow a}\frac{f'(x)}{F'(x)}$ 存在（或者为无穷大）

则 $lim_{x\rightarrow a}\frac{f(x)}{F(x)}=lim_{x\rightarrow a}\frac{f'(x)}{F'(x)}$

注意当 $lim_{x\rightarrow a}\frac{f'(x)}{F'(x)}$ 不存在时，关于 $lim_{x\rightarrow a}\frac{f(x)}{F(x)}$ 是否存在定理没有说，不确定。所以该方法无效。另外，当求一次导还是 $\frac{0}{0}$ 或 $\frac{\infty}{\infty}$ 时，仍然可以继续求导下去

定理2: $x\rightarrow\infty,f(x)\rightarrow 0,F(x)\rightarrow 0$ ，其余3个条件和定理1相同。两者唯一的区别就是一个x趋于0，一个趋于无穷。结论也一样。除了 $\frac{0}{0}$ 和 $\frac{\infty}{\infty}$ ， $0\times\infty,\infty-\infty,0^0,1^{\infty},\infty^{0}$ 也可以用洛必达法则，将它们化为 $\frac{0}{0}$ 和 $\frac{\infty}{\infty}$ 形式即可

当 $x\rightarrow\infty$ ,lnx < $x^n$ < $e^x$

总结：
1. $lim_{x\rightarrow a}\frac{f'(x)}{F'(x)}$ 不存在，本方法无效
2. 使用的时候一般都是多次求导
3. 每次求导后记得检查，是否还需要继续求导
4. 能用等价替换就先替换（乘积才能替换，加减不行）
5. 适当的朝外移项。将趋于常数的项提前移出去，会大大减少工作量

## 泰勒公式

微分时学过 $\Delta y\approx f'(x)\Delta x$ ,也就是说 $f(x)-f(x_0)\approx f'(x_0)(x-x_0)$ 。转换一下就是 $f(x)\approx f(x_0)+f'(x_0)(x-x_0)$ 。于是我们用 $x-x_0$ 这个一次表达式（以及常数 $f(x_0)$ 和系数 $f'(x_0)$ ，不算在表达式内）近似了f(x)这个函数。但是误差有点大，考虑高次的表达式： $P_n(x)=a_0+a_1(x-x_0)+a_2(x-x_0)^2+...+a_n(x-x_0)^n$ +余项（误差，比n次次数更高的表达式）=f(x)。如果x取 $x_0$ ，表达式全为0，结果就为 $f(x_0)=a_0$ 。如果把这个式子求导一次， $a_0$ 求导后为0，系数为 $a_2$ 到 $a_n$ 的项求导后结果里还有 $x-x_0$ ，除了 $a_1$ ，求导后只剩下 $a_1$ 。那么当x取 $x_0$ 时， $a_1=f'(x_0)$ 。然后求两次导，得到 $2a_2=f''(x_0)$ ,或者说 $2!a_2=f''(x_0)$ 。那么以此类推，最后会得到 $n!a_n=f^{(n)}(x_0)$ 。到此就能得到全部的系数： $a_0=f(x_0),a_1=\frac{f'(x_0)}{1!},a_2=\frac{f''(x_0)}{2!},...,a_n=\frac{f^{(n)}(x_0)}{n!}$

f(x)在 $x_0$ 处具有n阶导数， $\exists x_0$ 的一个邻域，使得对于邻域中的任意一点x，有 $f(x)=f(x_0)+\frac{f'(x_0)}{1!}(x-x_0)+\frac{f''(x_0)}{2!}(x-x_0)^2+...+\frac{f^{(n)}(x_0)}{n!}(x-x_0)^n+Rn(x)$ 。 $R_n=0((x-x_0)^n)$

$R_n(x)=\frac{f^{(n+1)}(\xi)}{(n+1)!}(x-x_0)^{n+1}$ , $\xi$ 介于 $x_0$ 与x之间。泰勒公式的作用在于将复杂的函数转换为线性的多项式。如 $e^x$ 不是线性的，但是泰勒展开后就是了。将质的复杂转换为量的复杂

麦克劳林公式：当 $x_0=0$ 时，上面的泰勒公式变为 $f(x)=f(0)+\frac{f'(0)}{1!}x+\frac{f''(0)}{2!}x^2+...+\frac{f^{(n)}(0)}{n!}x^n+\frac{f^{(n+1)}(\theta x)}{(n+1)!}x^{n+1}$ , 0 < $\theta$ < 1

## 函数的单调性

取 $x_1,x_2$ ( $x_1$ < $x_2$ ),根据拉格朗日中值定理，有 $f'(\xi)=\frac{f(x_2)-f(x_1)}{x_2-x_1}$ 。如果一阶导数值大于0，说明是该段为增；否则就是减

如果y=f(x)在[a,b]连续，(a,b)可导：
1. $f'(x)\geq 0$ 。若等号在有限个点上成立，则称为单调增
2. $f'(x)\leq 0$ 。若等号在有限个点上成立，则称为单调减

找单调性时需要特别注意导数为0的点（驻点）以及导数不存在的点

## 函数的凹凸性和拐点

![tu_ao](../images/tu_ao.png)

若曲线f(x)在区间I上是凹（凸）的，则-f(x)在区间I上是凸(凹)的

设函数f(x)在区间I内二阶导数存在，那么：
1. 若在I内，f''(x) > 0，则曲线f(x)在I上是凹的
2. 若在I内，f''(x) < 0，则曲线f(x)在I上是凸的

若在区间I内，函数y=f(x)的二阶导数 $f''(x)\geq 0(\leq 0)$ ，且等号仅在个别点成立，则曲线y=f(x)在区间I上仍然是凹（凸）的

如果函数y=f(x)的图形在经过点 $(x_0,f(x_0))$ 改变了凸凹性，则称点 $(x_0,f(x_0))$ 是曲线y=f(x)的一个拐点。分界点为下列两种类型的点：
1. 二阶导数为零的点
2. 二阶导数不存在的点

## 极值及其求法

极值：f(x)在 $x_0$ 的邻域 $U(x_0)$ 有定义。对于 $x_0$ 的去心邻域内的一点x，都有f(x) < $f(x_0)$ （f(x) > $f(x_0)$ ）。那么 $f(x_0)$ 是极大值(极小值)

最值：整个区域内最小（大）的值。最值唯一，但最值点不唯一

f(x)在 $x_0$ 可导。若在 $x_0$ 处取得到极值，那么 $f'(x_0)=0$ 。此为必要条件，导数不存在的点也可能是极值点。但反过来不一定成立。

第一充分条件：f(x)在 $x_0$ 处连续，并且在 $x_0$ 的去心邻域内可导。那么：
1. 如果 $x\in (x_0-\delta,x_0)$ ,f'(x) > 0（f'(x) < 0）. $x\in (x_0,x_0+\delta)$ ,f'(x) < 0（f'(x) > 0）.那么 $x_0$ 处取极大值（极小值）
2. $x_0$ 的去心邻域内任取一点x，f'(x)符号不变。那么 $x_0$ 不是极值点

第二充分条件：如果函数二阶可导，并且 $f'(x_0)=0,f''(x_0)\not ={0}$ ,那么如果 $f''(x_0)$ < 0（> 0）,那么 $x_0$ 处取极大值（极小值）。如果二阶导数等于0，结果不一定

## 函数图形的绘制

画图的步骤：
1. 确定定义域，奇偶性，周期性。求出一阶导数和二阶导数
2. 找到一阶导数等于零的点和二阶导数等于零的点。并找f(x)的间断点以及一阶导数不存在的点和二阶导数不存在的点。利用这些特殊点将定义域分开
3. 在每一部分上用f'(x)确定增减性，f''(x)确定凹凸性和拐点
4. 考虑三种[渐近线](https://baike.baidu.com/item/%E6%B8%90%E8%BF%91%E7%BA%BF/2755670)（在这个教程里没讲，不过不难，直接看链接就能懂。但是视频里老师会说铅垂渐近线而不是垂直渐近线）
5. 找f'(x)=0和f''(x)=0以及不存在的点，将它们的函数值求出来
6. 考虑极值

渐近线相关：
1. 定义域为全体的函数（没有分母等于零的情况）没有垂直渐近线，但是有可能有水平渐近线
2. 有些函数当x趋于无穷时，y会趋于某个值而不是无穷。那个值所在的水平线就是水平渐近线
3. 函数没有间断点就没有铅垂渐近线。出现铅垂渐近线时注意求极限时要从左右两边看，两者的极限可能不同

其他：
1. 奇函数的导数是偶函数，偶函数的导数是奇函数

## 曲率

曲率用于描述线的弯曲程度。在线上取两个点，过这两个点作切线，两条切线与x轴形成的夹角差越大曲率越大

平均曲率： $\overline{k}=|\frac{\Delta \alpha}{\Delta s}|$ 。 $\Delta \alpha$ 是两个夹角的差， $\Delta s$ 是两个点之间的弧长

在M处的曲率： $k=lim_{\Delta s\rightarrow 0}|\frac{\Delta\alpha}{\Delta s}|=|\frac{d\alpha}{ds}|$

直线的曲率是0，圆的曲率是 $\frac{1}{r}$ ，r为半径。半径越大的圆曲率越小

若直角坐标系曲线由y=f(x)表示且有二阶导数，则 $K=\frac{|y''|}{(1+(y')^2)^{\frac{3}{2}}}$

直角坐标系，x=x(t),y=y(t),则 $K=\frac{|x'y''-x''y'|}{((x')^2+(y')^2)^{\frac{3}{2}}}$

设曲线上一点P处曲率K不为0。若过P作一个半径为 $\rho=\frac{1}{K}$ 的圆，使它在点P处与曲线有相同的切线，并在P近旁与曲线位于切线的同侧。就把这个圆称为曲线在P处的曲率圆。曲率圆的半径称为曲率半径，曲率圆的圆心称为曲率中心

## 不定积分的定义

如果F'(x)=f(x)，就叫F(x)是f(x)的一个原函数（因为常数项求导是0，加不同的常数项结果不会变）。[F(x)+c]'=f(x)

原函数存在定理：连续的函数一定有原函数

$\int f(x)dx=F(x)+C$ 。f(x)为被积函数，dx为积分变量，f(x)dx为积分表达式

虽然说积分和导数是逆运算，但是对于一些特殊的题，如 $\int\frac{1}{x}dx=ln|x|+C$ ，就有点不一样。 $(lnx)'=\frac{1}{x}$ ，但 $\frac{1}{x}$ 积分却不完全是lnx

一些定理：
- $\frac{d}{dx}[\int f(x)dx]=f(x)$
- $d[\int f(x)dx]=f(x)dx$
- $\int F'(x)dx=F(x)+c$ ,另种写法为 $\int dF(x)=F(x)+C$ 。这里注意，假如说 $x^2$ 求导，结果其实是不知道的，因为不知道对谁求导。如果是 $\frac{dx^2}{dx^2}$ ， $x^2$ 对 $x^2$ 求导，结果是1。回到那个公式，可以加个1写为 $\int 1dF(x)=F(x)+C$ ，即F(x)对F(x)求导，结果为1

## 积分表

可以拿之前写过的求导表一一比对
- $\int x^{\mu}dx=\frac{x^{\mu+1}}{\mu+1}+c$
- $\int kdx=kx+c$
- $\int \frac{1}{x}dx=ln|x|+c$
- $\int \frac{dx}{1+x^2}=arctanx+c$
- $\int \frac{dx}{\sqrt{1-x^2}}=arcsinx+c$
- $\int cosxdx=sinx+c$
- $\int sinxdx=-cosx+c$
- $\int \frac{dx}{cos^2x}=\int sec^2xdx=tanx+c$
- $\int \frac{dx}{sin^2x}=\int csc^2xdx=-cotx+c$
- $\int secxtanxdx=secx+c$
- $\int cscxcotxdx=-cscx+c$
- $\int e^xdx=e^x+c$
- $\int a^xdx=\frac{a^x}{lna}+c$
- $\int\ln xdx=x\ln x-x+C$

## 不定积分的性质

性质：
1. $\int[f(x)\pm g(x)]dx=\int f(x)d(x)\pm\int g(x)dx$
2. $\int kf(x)dx=k\int f(x)dx$ 。k如果和x有关就不能提

## 第一类换元积分法

d的后面是具体的变量，易知 $\int 1dF(u)=F(u)+C$ 。如果让 $F(u)=F(\phi(x))$ ，说明u是中间变量, $u=\phi(x)$ 。代入原来的式子就是 $\int 1dF(\phi(x))=F(\phi(x))+C$ 。对 $F(\phi(x))$ 求导，结果为 $f(\phi(x))\phi'(x)$ (复合函数求导)。已知微分的定义dy=y'dx,那么 $dF(\phi(x))=f(\phi(x))\phi'(x)dx$ ,便有积分结果 $\int f(\phi(x))\phi'(x)dx=F(\phi(x))+C$ 。通俗讲就是把d前面的某一部分求原函数，拿到d的里面去

这块我初看没懂，又找了个学习连接： https://zhuanlan.zhihu.com/p/440594185 ，好像懂了？积分表只提供了诸如 $\int f(x)dx$ 的结果。我们可以把d后面的变量改一下，改成 $\int f(g(x))dg(x)$ ，结果不会变。这个式子展开是 $\int f(g(x))g'(x)dx$ (dy=y'dx) 。反过来想，假如我们要求 $\int f(g(x))dx$ ,是否能稍微凑一下，凑成 $\int f(g(x))g'(x)dx$ ，最终得到 $\int f(g(x))dg(x)$ ，即可应用积分表

$\int 2cos(2x)dx$ 。把2看成g'(x)，cos(2x)看成f(g(x))，就有 $\int cos(2x)d2x$ ,结果为sin(2x)+C

凑的思想在上面那题没体现出来。 $\int\frac{1}{3+2x}dx$ 没法直接找到g'(x)了，但是隐约感觉和 $\frac{1}{x}$ 很像。将式子转换为 $\frac{1}{2}\int\frac{2}{3+2x}dx$ 。这里g'(x)是2，原函数g(x)可以是2x。但是为了凑f(g(x))，让g(x)=2x+3，满足g'(x)=2的同时凑出个f(g(x))。然后套积分表，得到 $\frac{1}{2}ln|3+2x|+C$

另外提一句，通过上面那题能看出来d(x+C)=dx

一些结论：
- $\int \tan xdx=-\ln|\cos x|+C$
- $\int \cot xdx=\ln|\sin x|+C$
- $\int \csc xdx=\ln|\tan\frac{x}{2}|+C=\ln|\csc x-\cot x|+C$
- $\int \cos(3x)\cos(2x)dx=\frac{1}{2}\sin x+\frac{1}{10}\sin 5x+C$
- $\int\sec xdx=\ln|\sec x+\tan x|+C$

## 第二类换元积分法

如果说第一类是把g'(x)求原函数后放到d后面，第二类就是反过来，把d后面的g(x)求导得到g'(x)放到前面去。一般用来求带根号的积分。带根号的积分只有 $\sqrt{x^2}$ 比较好处理，所以要用这个方法凑出平方

有 $\int f(x)dx$ ，让 $x=\phi(t)$ ，就有 $[\int f(\phi(t))\phi'(t)dt]_{t=\phi^{-1}(x)}$ 。至于为什么有个 $t=\phi^{-1}(x)$ （反函数）,因为原本是求x的积分，用t的函数换元x后就变成了求t的积分。假设结果为g(t)+C，需要用反函数建立t和x的关系 $t=\phi^{-1}(x)$ ，最后代入得到 $g(\phi^{-1}(x))+C$ 就是关于x的积分了

一些常用的换元：
1. $\sqrt{a^2-x^2}=\sqrt{a^2\cos^2t},x=a\sin t$
2. $\sqrt{x^2-a^2}=\sqrt{a^2\tan^2t},x=a\sec t$
3. $\sqrt{x^2+a^2}=\sqrt{a^2\sec^2t},x=a\tan t$

一些结论：
- $\int\frac{dx}{a^2+x^2}=\frac{1}{a}\arctan\frac{x}{a}+C$
- $\int\frac{dx}{x^2-a^2}=\frac{1}{2a}\ln|\frac{x-a}{x+a}|+C$
- $\int\frac{dx}{\sqrt{a^2+x^2}}=\ln|\sqrt{x^2-a^2}+x|+C$
- $\int\frac{\sqrt{a^2-x^2}}{x^4}dx=-\frac{(a^2-x^2)^{\frac{3}{2}}}{3a^2x^3}+C$
- $\int\frac{dx}{\sqrt{a^2-x^2}}=\arcsin\frac{x}{a}+C$

## 分部积分法

$\int udv=uv-\int vdu$ 。u和v分别为两个函数。推导过程：
- (uv)'=u'v-uv'
- uv'=(uv)'-u'v
- $\int uv'dx=\int(uv)'dx-\int u'vdx$
- $\int udv=uv-\int vdu$

关键在于放在d后面的函数u是什么，各种函数往d后面拿的优先级是什么。以下为各种函数的优先级(反函数＜对数函数＜幂函数＜三角函数＜指数函数)：
1. $e^x$
2. sinx,cosx
3. $x^n$

另外注意，分部积分交换完后一定要把d后面的拿出去。例如 $\int\sin xe^xdx$ ，将 $e^x$ 拿到d后面去，得到 $\int\sin xde^x=e^x\sin x-\int e^xd\sin x$ 。到这里必须要把dsinx往外拿，得到 $\int e^x\cos xdx$ 。分部积分通常要用多次，于是再来一次，得到 $e^x\sin x-\int\cos xde^x=e^x\sin x-e^x\cos x-\int e^x\sin xdx$ 。最后发现回到原点。这也是分部积分用了两次以上后常见的现象，此时只需注意 $\int e^x\sin xdx$ 前是负号，把这个挪到左边就变成了正号，那就是两倍的 $\int e^x\sin xdx$ 。那么结果为 $\frac{e^x\sin x-e^x\cos x}{2}$ 。一般分部积分出现要求的式子后注意前面的符号，只要不是1就可以，是1说明做错了

当要积分的式子越来越简单后，说明做法是正确的。高次的x在应用多次分部积分后应当次数越来越低，而不是越来越高

## 有理函数积分

因为有理分式的积分比较特殊，所以单独拿出来说。有理分式形如 $\frac{P(x)}{Q(x)}$ ，分子分母均为多项式，分子m次分母n次。以下只考虑m小于n的情况，因为当m大于n时，可以用多项式除法使m小于n；如果m等于n，则参考下面的做法： $\frac{x^3+x^2-5}{x^3-x^2+x-1}=\frac{x^3-x^2+x-1+2x^2-x-4}{x^3-x^2+x-1}$ 。能消掉分子的 $x^3-x^2+x-1$ ，剩下的 $2x^2-x-4$ 就比分母次数低了

当m小于n时，分以下几种情况（按从最简单到最难排序）：
1. 分子是常数： $\int\frac{1}{2x+1}dx$ ,配个2凑出 $\frac{1}{2}\int\frac{1}{2x+1}d(2x+1)$ 然后直接对照积分表
2. 分子是常数，但是分母为2次，可分解： $\int\frac{1}{x^2-3x+2}dx=\int\frac{1}{(x-1)(x-2)}dx=\int(\frac{1}{x-2}-\frac{1}{x-1})dx$
3. 分子常数，分母无法因式分解：分母配方后为后续项为正号
4. 分子常数，分母无法因式分解：分母配方后为后续项为负号
5. 分子一次，分母二次

![345](../images/345.png)

6. 分子常数，分母高次（可分解）：拆开后进行待定系数法（根据弹幕的建议，拆分方法总结见 https://www.bilibili.com/video/BV1LE41137no/ ）。这里老师使用的技巧为，分母一次的式子假设是常数，分母二次的式子假设是一次的

![6](../images/6.png)

7. 分子二次，分母高次（可分解）

![7](../images/7.png)

8. 不是有理分式但是可以通过换元化为有理分式

![8](../images/8.png)

## 定积分的概念

如果f(x)在[a,b]有界，在[a,b]上任意插入若干分点，将[a,b]分为n个小区间： $\Delta x_1,\Delta x_2,...,\Delta x_n$ 。在每个区间任取一点 $\xi$ ，并让 $\lambda=\max\{\Delta x_1,...,\Delta x_n\}$ ，则有定积分 $\int _a^bf(x)dx=\lim_{x\rightarrow 0}\Sigma_{i=1}^nf(\xi_i)\Delta x_i$

定积分求出来是个具体的数，只与f(x),[a,b]有关,与积分变量无关。定理：
1. 函数只要连续就可积
2. 函数有界但有有限个间断点，同样可积

几何意义：因为定积分求的是函数图像在[a,b]区间与x轴形成的面积，所以当f(x)大于0时，定积分是形成的面积；当f(x)小于0时，定积分是形成面积的相反数；当f(x)有正有负，定积分就是正的部分的面积减去负的部分的面积

如何求定积分：
1. 矩形法：将面积分成n份，每份 $\Delta x=\frac{b-a}{n}$ 。在每个区间都取 $\xi$ , 让 $y_i=f(\xi_i)$ ，得到 $\frac{b-a}{n}y_1+\frac{b-a}{n}y_2+...+\frac{b-a}{n}y_n=\frac{b-a}{n}(y_1+y_2+...+y_n)$ 。矩形法只是面积的近似，求出来的值会比实际值小
2. 梯形法：类似矩形法，但是尝试用矩形近似面积。假设 $f(\xi_{i})=y_i,f(\xi_{i+1})=y_j$ ，将 $y_i$ 和 $y_j$ 连起来，所形成的梯形求面积就是 $\Delta x_i\frac{y_i+y_j}{2}$ 。仍然将面积分为n个矩形，公式为 $\frac{b-a}{n}(\frac{y_0+y_1}{2}+\frac{y_1+y_2}{2}+...+\frac{y_{n-1}+y_n}{2})=\frac{b-a}{n}(\frac{y_0+y_n}{2}+y_1+y_2+...+y_{n-1})$
3. 最后还有个抛物线法。视频没有给出公式，思想就是拿三组 $(x_i,y_i)$ 解抛物线方程 $y=px^2+qx+r$ ，然后用抛物线的定积分去近似

## 定积分的性质

规定：
1. 若b=a, $\int _a^a\:f\left(x\right)=0$
2. $\int _a^b\:f\left(x\right)dx=-\int _b^a\:f\left(x\right)dx$

性质：
1. $\int_a^b(\alpha f(x)+\beta g(x))dx=\alpha\int_a^bf(x)dx+\beta\int_a^bg(x)dx$
2. 若 a < c < b(a < b < c), $\int_a^bf(x)dx=\int_a^cf(x)dx+\int_c^bf(x)dx$
3. f(x)=1, $\int_a^b1dx=b-a$ . $\int_a^bkdx=k(b-a)$
4. $f(x)\geq(\leq) 0,\int_a^bf(x)dx\geq(\leq) 0$
5. M和m分别为f(x)的最大值和最小值。 $m(b-a)\leq\int_a^bf(x)dx\leq M(b-a)$
6. 定积分中值定理：f(x)连续， $\exists\xi\in[a,b],\int_a^bf(x)dx=f(\xi)(b-a)$ . $f(\xi)$ 也叫平均值

推论：
1. $f(x)\leq g(x)$ . $\int_a^bf(x)dx\leq\int_a^bg(x)dx$
2. $|\int_a^bf(x)dx|\leq\int_a^b|f(x)|dx$

## 微积分基本公式

速度与距离的关系:函数v(t)表示t时行驶的时间，则 $\int_{T_1}^{T_2}v(t)dt=S(T_2)-S(T_1)$

如果积分的上限未知，那么 $\Phi(x)=\int_a^xf(t)dt$ 。注意此时积出来是x的函数，叫积分上限函数，和积分变量没有任何关系。如果下限未知可以交换，让x在上限，得到 $(\int_x^af(t)dt)'=-f(x)$

定理：
1. $\Phi'(x)=\frac{d}{dx}\int_a^xf(t)dt=f(x)$
2. 如果f(x)在[a,b]上连续，那么 $\Phi(x)=\int_a^xf(t)dt$ 是f(x)在[a,b]上的一个原函数

如果上限是个函数，则遵循复合函数求导法则： $(\int_a^{\phi(x)}f(t)dt)'=f(\phi(x))\phi'(x)$ 。同理，下限是函数只需加个负号。上下限都是函数则将两者合在一起： $[\int_{\phi(x)}^{\phi(x)}f(t)dt]'=f(\phi(x))\phi'(x)-f(\phi(x))\phi'(x)$ 。其实就是把上限函数代入进去求导后再把下限函数代进去

牛顿-莱布尼茨公式： $\int_a^bf(x)dx=F(x)|^b_a=F(b)-F(a)$ 。F(x)是f(x)的原函数， $F(x)|^b_a$ 表示将上下限代入进去。这个公式将求定积分（直观来看就是面积）转换为了求原函数

例题： $\int_0^1x^2dx=\frac{1}{3}x^3|^1_0=\frac{1}{3}$

## 定积分的换元法

f(x)在[a,b]上连续，引入另一个函数使 $x=\phi(t)$ ，满足：
1. $\phi(\alpha)=a,\phi(\beta)=b$
2. $\phi$ 在 $[\alpha,\beta]$ 上具有连续导数

则有： $\int_a^bf(x)dx=\int_{\alpha}^{\beta}f(\phi(t))\phi'(t)dt$

一些结论：
- 在[-a,a]区间，若f(x)为偶函数， $\int_{-a}^af(x)dx=2\int_0^af(x)dx$ ;若为奇函数， $\int_{-a}^af(x)dx=0$ 。前提为积分区域关于原点对称
- $\int_0^{\frac{\pi}{2}}f(\sin x)dx=\int_0^{\frac{\pi}{2}}=f(\cos x)dx$
- $\int_0^{\pi}xf(\sin x)dx=\frac{\pi}{2}\int_0^{\pi}f(\sin x)dx$
- 以下两条基于f(x)为周期函数，T为该函数的周期
1. $\int_a^{a+T}f(x)dx=\int_0^Tf(x)dx$
2. $\int_a^{a+nT}f(x)dx=n\int_0^Tf(x)dx$
- 辅助角公式： a > 0, $a\sin x+b\cos x=\sqrt{(a^2+b^2)}\sin[x+\arctan(\frac{b}{a})]$

## 定积分的分部积分法

和不定积分类似，公式为 $\int_a^budv=uv|_a^b\int_a^bvdu$ ，也可能会出现要求的积分又出现的情况

## 无穷限的反常积分

$\int_a^{+\infty}f(x)dx=lim_{t\rightarrow +\infty}\int_a^tf(x)dx$

若f(x)在a到正无穷上连续且极限存在，就称这个反常积分收敛。反之称为发散。还有下限趋近于负无穷的版本，同样也有类似的收敛/发散定义

$\int_{-\infty}^{b}f(x)dx=lim_{t\rightarrow -\infty}\int_t^bf(x)dx$

以及上限下限都是无穷：

$\int_{-\infty}^{+\infty}f(x)dx=\int_{-\infty}^0f(x)dx+\int_0^{+\infty}f(x)dx$

若拆成的两个积分均收敛，则原积分也收敛；有一个是发散的，则原积分也发散。反常积分也可以用牛顿-莱布尼茨公式(假设f(x)的原函数是F(x))：

$\int_a^{+\infty}f(x)dx=lim_{t\rightarrow +\infty}\int_a^tf(x)dx=lim_{t\rightarrow +\infty}F(x)|_a^t=lim_{t\rightarrow +\infty}(F(t)-F(a))=F(+\infty)-F(a)$

同理：

$\int_{-\infty}^{b}f(x)dx=F(b)-F(-\infty)$<br>
$\int_{-\infty}^{+\infty}f(x)dx=F(x)|^{+\infty}_{-\infty}$

## 无界函数的反常积分

如果函数f(x)在某点x=a的任意一个去心邻域内部无界，则x=a称为无界点，或瑕点。对无界函数的反常积分就叫瑕积分

f(x)在b点取不到，那么稍微往左偏一点取t（a，b区间瑕点为b），则有 $\int_a^bf(x)dx=lim_{t\rightarrow b^-}\int_a^tf(x)dx$ 。若极限存在，那么f(x)在a到b上的反常积分收敛；否则发散。同理，如果往左边也取不到，就往右（a，b区间瑕点为a）： $\int_a^bf(x)dx=lim_{t\rightarrow a^+}\int_t^bf(x)dx$ 。或者说瑕点c在a，b区间的中间： $\int_a^bf(x)dx=\int_a^cf(x)dx+\int_c^bf(x)dx=lim_{t\rightarrow c^-}\int_a^tf(x)dx+lim_{t\rightarrow c^+}\int_t^bf(x)dx$

实际求的时候还是用牛顿-莱布尼茨公式,拿第一个举例,设F是f的原函数： $\int_a^bf(x)dx=lim_{t\rightarrow b^-}\int_a^tf(x)dx=F(x)|_a^{b^-}=F(b^-)-F(a)$

广义积分或者瑕积分也可以利用换元来积，但是换元函数要是单调的

## 伽马函数

$\Gamma(s)=\int_0^{+\infty}e^{-x}x^{s-1}dx$ (s > 0)。以下几点需要掌握：
1. $\Gamma(s+1)=s\Gamma(s)$
2. $\Gamma(n+1)=n!$

## 定积分应用——求面积

因为定积分最开始引入时就是拿来求面积的，所以一个函数图像与x轴形成的面积 $A=\int_a^bf(x)dx$

假设有两个函数y=f(x)和y=g(x)，f(x)的图像在[a,b]段始终高于g(x)，则在x轴取a和b连接到两个图像后，中间夹着的面积为X型区域，公式为 $\int_a^b[f(x)-g(x)]dx$

假设有两个函数 $x=\psi(y)$ 和 $x=\phi(y)$ ，图像上 $\psi(y)$ 要比 $\phi(y)$ 更靠近y轴。若在y轴取c和d连接到两个图像后，中间夹着的面积为Y型区域。这时候就要把函数的x和y反过来，让y轴变为x轴就能转换为X型区域求了。公式为 $\int_c^d[\phi(y)-\psi(y)]dy$ 。注意题目一般给的都是y是x的函数，但是Y型区域公式要用x是y的函数求积分，所以要转换一下；而且c，d看的是两个函数交点的y坐标

至于题目到底是用X型还是Y型，首先画图，然后看：
1. 若图像围成的阴影面积有线段且垂直于x轴，用X型
2. 若图像围成的阴影面积有线段且垂直于y轴，用Y型
3. 若没有线段，则看有没有函数一直在另一个函数的上边（X型）或右边（Y型）

有时候如果没有直接满足要求的图像就分段求

## 定积分应用——求极坐标面积

公式为 $\frac{1}{2}\int_{\alpha}^{\beta}(\rho(\theta))^2d\theta$

## 定积分应用——旋转体体积

当某一个函数绕x轴旋转后，会形成一个3d物体。将该3d物体切成很多份，每份的横截面都是圆。因此利用定积分即可获得该物体的体积： $\int_a^b\pi f^2(x)dx$ 。或者拿A(x)作为横截面的面积函数： $\int_a^bA(x)dx$

绕y轴同理，只是此时的横截面圆的半径从y值变成了x值： $\int_a^b\pi\phi^2(y)dy$ 。注意这里要把题目给的y=f(x)变成 $y=\phi(x)$ 形式

对于那种求两个图像旋转后中间相夹体积的题，拿外面的物体的体积减里面的物体的体积即可。 $\int_a^b\pi f_1^2(x)dx-\int_a^b\pi f_2^2(x)dx$ 。当然也能直接减了横截面面积再算体积： $\int_a^b\pi(f_1^2(x)-f_2^2(x))dx$ 。同理绕y轴也有两种理解： $\int_a^b\pi\phi_1^2(y)dy-\int_a^b\pi\phi_2^2(y)dy$ 和 $\int_a^b\pi(\phi_1^2(y)-\phi_2^2(y))dy$

这节出现个正劈椎体，其体积为同底同高的圆柱体体积的一半

## 定积分应用——平面曲线的弧长

对于一段弧，我们可以用一条斜线来近似。将这条斜线看作三角形的斜边来构造三角形，剩余的两条边分别为 $\Delta x$ 和 $\Delta y$ 。假设x和y分别由两个函数得到：
- $x=\phi(t)$
- $y=\psi(t)$

那么斜边的长度 $ds=\sqrt{(dx)^2+(dy)^2}$ 。根据公式dy=y'dx，也可写为 $\sqrt{\phi'^2(t)+\psi'^2(t)}dt$ 。便有了弧长公式： $S=\int_{\alpha}^{\beta}\sqrt{\phi'^2(t)+\psi'^2(t)}dt,\alpha\leq t\leq\beta$ 。这里要注意定积分不只是求面积，它本质是一种和的极限。所以我们将一段弧分为无数个很小的部分，每份用斜线近似，然后加起来就是弧的总长

上面那个是基础公式，有了它就能继续推别的。若单纯y=f(x)，也可以转换为x=x和y=f(x)。然后套公式，得到 $S=\int_a^b\sqrt{1+y'^2}dx$

如果把弧放到极坐标上： $\rho=\rho(\theta)$ .根据极坐标的知识， $x=\rho(\theta)\cos\theta,y=\rho(\theta)\sin\theta$ ，得到另一种形式的公式： $\int_{\alpha}^{\beta}\sqrt{\rho^2(\theta)+\rho'^2(\theta)}d\theta$

## 微分方程的基本概念

- 含导数的方程即为微分方程
- 阶为微分方程里导数的阶数
- 通解为含常数的个数等于阶
- 初值条件：一般题目会给出，比如"函数过点(1,2),切线斜率为2x，求函数"中的(1,2)就是初值条件

## 可分离变量的微分方程

$y'=\frac{dy}{dx}$ ，某些情况下可整理方程为 $g(y)dy=f(x)dx$ 。若y和x像这样由等号完全分开，就叫可分离变量。这样的方程下一步就是两边同时求积分

## 齐次方程

$\frac{dy}{dx}=\phi(\frac{y}{x})$ 即为齐次方程。齐次方程按照下面三步解：
1. $u=\frac{y}{x}$
2. y=xu
3. $\frac{dy}{dx}=u+x\frac{du}{dx}$

最后把尝试把u和x分开，按照可分离变量的微分方程去做即可。通常来说不会直接给出 $\frac{y}{x}$ ，需要变形后得到。能通过变形得到齐次方程的方程中各个x和y项的次数一定是对应的。方程中有n次的x就一定对应着有个n次的y

然后是那些可化为齐次的方程。重点讲了形如 $\frac{dy}{dx}=\frac{ax+by+c}{a_1x+b_1y+c_1}$ 的方程。这里x和y次数匹配，但是多了个c，不能直接上下同时除以x构造 $\frac{y}{x}$ 。做法是设x=X+h,y=Y+k，就有 $\frac{dY}{dX}=\frac{aX+bY+ah+bk+c}{a_1X+b_1Y+a_1h+b_1k+c_1}$ 。这里如果后面的常数项相加为0就能做了。构建方程组：
- ah+bk+c=0
- $a_1h+b_1k+c_1=0$

可能会有两种情况：
1. $\frac{a_1}{a}\not ={\frac{b_1}{b}}$ 。这种情况直接解h和k即可
2. $\frac{a_1}{a}={\frac{b_1}{b}}$ 。这种情况继续设 $\frac{a_1}{a}={\frac{b_1}{b}}=\lambda$ ，原式等于 $\frac{dy}{dx}=\frac{ax+by+c}{\lambda ax+\lambda by+c_1}=\frac{ax+by+c}{\lambda(ax+by)+c_1}$ 。再设一次v=ax+by，有 $\frac{dv}{dx}=a+b\frac{dy}{dx}=\frac{1}{b}(\frac{dv}{dx}-a)=\frac{v+c}{\lambda v+c_1}=\frac{dv}{dx}=b\frac{v+c}{\lambda v+c_1}+a$ 。最后这个式子只包含v；a，b，c和 $\lambda$ 均为常数，就能按照可分离变量的微分方程做了

## 一阶线性微分方程

一阶线性微分方程形如 $\frac{dy}{dx}+p(x)y=Q(x)$ 。所谓线性方程，就是只包含加法和数乘运算的方程。又分两种情况：
1. Q(x)=0。此时的方程是齐次的。继续变形成可分离变量的形式后解即可得到 $y=ce^{-\int p(x)dx}$
2. Q(x)不为0。这种情况设 $y=ue^{-\int p(x)dx}$ ，注意这里u也是x的函数，不是常数，而且暂时不知道，所以下面要找u。代入原式得到 $u'e^{-\int p(x)dx}-ue^{-\int p(x)dx}p(x)+p(x)ue^{-\int p(x)dx}=Q(x)$ 。后两项消了，得到 $u'e^{-\int p(x)dx}=Q(x)$ ，移项后得到可分离变量形式 $u'=Q(x)e^{\int p(x)dx}$ ，两边求积分即可得到u： $u=\int Q(x)e^{\int p(x)dx}dx+C$ 。最后整体全部代进去，得到公式： $y=e^{-\int p(x)dx}(\int Q(x)e^{\int p(x)dx}dx+C)$

伯努利方程： $\frac{dy}{dx}+p(x)y=Q(x)y^n$ 。n=0时一次线性（跟上面一样）；n=1时为齐次式，因为可以把Q(x)y移到左边，整体提出y，然后把p(x)-Q(x)看作整体。假如n大于1时就要绕个圈再解了。方程两边同时除 $y^n$ ，得到 $y^{-n}\frac{dy}{dx}+p(x)y^{1-n}=Q(x)$ 。设 $y^{1-n}=z$ ，有 $\frac{1}{1-n}\frac{dz}{dx}=y^{-n}\frac{dy}{dx}$ （其实就是个复合函数求导）。代入原式有 $\frac{1}{1-n}\frac{dz}{dx}+p(x)z=Q(x)$ 。两边同时乘(1-n)，得到 $\frac{dz}{dx}+(1-n)p(x)z=(1-n)Q(x)$ 。假如把(1-n)p(x)整体看作p，(1-n)Q(x)整体看作Q，这就是一个关于z的一阶线性微分方程了。解出来后的结果是z的结果，根据 $y^{1-n}=z$ 转成y才是最终答案

## 可降阶的高阶微分方程

第一种高阶微分方程形如 $y^{(n)}=f(x)$ 。这里y和x各在两边，所以直接求积分： $y^{(n-1)}=\int f(x)dx$ 。次数减一是因为本来是n次导数，求一次原函数就少了一次导数。一直积下去y的次数会越来越小，最后就变成了y

第二种形如y''=f(x,y')，指方程里有y'',y',x但没有y。此时设y'=p，这样y''就等于p'。原方程变为p'=f(x,p)，怎么解这个一阶微分方程之前学过，解出p后记得再转回y

第三种形如y''=f(y,y')，指方程里有y'',y',y但没有x。仍然用y'=p，那么 $y''=\frac{dp}{dx}=\frac{dp}{dy}\times\frac{dy}{dx}$ 。因为 $\frac{dy}{dx}=y'=p$ ，就有 $p\frac{dp}{dy}$ 。代入原式可得 $p\frac{dp}{dy}=f(y,p)$ 。此时为p的一阶微分方程，求出p后再求y即可

## 常系数线性齐次微分方程

二阶齐次线性微分方程：y''+P(x)y'+Q(x)y=0。这节课看稍微简单点的形式：y''+py'+qy=0。没讲怎么推，直接看解题步骤：
1. 求特征方程。y''换为 $r^2$ ，y'换为r，y换为1。此刻为一元二次方程，看判别式 $\Delta=b^2-4ac=p^2-4q$
- $\Delta$ > 0， $r_1=\frac{-p+\sqrt{p^2-4q}}{2},r_2=\frac{-p-\sqrt{p^2-4q}}{2}$
- $\Delta=0,r_1=r_2=\frac{-p}{2}$
- $\Delta$ < 0，无实根但是有共轭复根： $r_1=\alpha+\beta i,r_2=\alpha-\beta i$
2. 根据求出的根求y。上面的三种情况分别对应下面三种y的解：
- $y=c_1e^{r_1x}+c_2e^{r_2x}$ 。 $c_1,c_2$ 是任意常数，直接照常写； $r_1,r_2$ 为求出来的两个根
- $t=(c_1+c_2x)e^{r_1x}$
- $y=e^{\alpha x}(c_1\cos\beta x+c_2\sin\beta x)$

## 空间直角坐标系

这里略过直角坐标系以及三维向量的基础定义，直接看两个向量平行的定义。a，b平行，说明有 $b=\lambda a$ ，且对应分量成比例 $\frac{bx}{ax}=\frac{by}{ay}=\frac{bz}{az}$

可以以向量为未知数（元）来构建方程组。解法和普通的方程组相同

## 向量模 两点距离

三维向量的模为 $\sqrt{x^2+y^2+z^2}$ 。两点之间的距离公式： $\sqrt{(x_1-x_2)^2+(y_1-y_2)^2+(z_1-z_2)^2}$

## 方向角方向余弦

假设有三维向量r=(x,y,z)，记 $\cos\alpha=\frac{x}{|r|},\cos\beta=\frac{y}{|r|},\cos\gamma=\frac{z}{|r|}$ 。则由这三个余弦所构成的向量 $(\cos\alpha,\cos\beta,\cos\gamma)=\frac{1}{|r|}(x,y,z)=\frac{1}{|r|}r$ 为(x,y,z)的同方向单位向量，叫做方向余弦。 $\alpha,\beta,\gamma$ 分别为x，y，z与x轴，y轴，z轴构成的面的夹角。 $\cos^2\alpha+\cos^2\beta+\cos^2\gamma=1$

投影：给出一个向量OM，在M点处（向量头）作与x轴垂直的线段，与x轴相接的那点记为M'。则有向量 $OM'=\lambda e=\lambda(1,0,0)$ ， $\lambda$ 为向量OM=r在x轴上的投影。可记为 $Prj_xr$ 或r(x)。当向量与x轴垂直时，投影为0。投影的性质：
1. $Prj_ua=|a|\cos\phi$ , $\phi$ 为向量a与u轴（x或y或z）的夹角
2. $Prj_u(a+b)=Prj_ua+Prj_ub$
3. $Prj_u\lambda a=\lambda Prj_ua$

## 数量积

数量积： $a\*b=|a||b|\cos\theta=|a|Prj_ab=|b|Prj_ba$ 。性质：
1. $a\*a=|a|\*|a|\cos 0=|a|^2$
2. 若向量a，b的数量积为0，则 $\theta=90^{\circ}$ ，记做 $a\perp b$ 。 $a\*b=0\leftrightarrow a\perp b$

规律：
1. a\*b=b\*a
2. (a+b)\*c=a\*c+b*c
3. $(\lambda a)\*b=\lambda(a\*b)$ , $a\*(\lambda b)=\lambda(a\*b)$ , $(\lambda a)\*(\mu b)=\lambda\mu(a\*b)$

利用向量的x，y，z分量求数量积:a\*b = $a_xb_x+a_yb_y+a_zb_z$ 。线性代数里的内积和这个定义一致。可以将数量积的定义改写为 $\cos\theta=\frac{a_xb_x+a_yb_y+a_zb_z}{\sqrt{a_x^2+a_y^2+a_z^2}\sqrt{b_x^2+b_y^2+b_z^2}}$

## 向量积

假设有a，b两向量，定义 $c=a\times b$ 为a和b的向量积（叉乘）。 $|c|=|a||b|\sin\theta$ ；c的方向遵循右手准则（参考 https://zhidao.baidu.com/question/528267710 和 https://www.zhihu.com/question/517909575 ）。性质：
1. $a\times a=0$
2. 两个非零向量a，b满足 $a\times b=0$ ，则a//b。 $a//b\Leftrightarrow a\times b=0$
3. $b\times a=-a\times b$
4. $(a+b)\times c=a\times c+b\times c$
5. $(\lambda a)\times b=a\times(\lambda b)=\lambda(a\times b)$
6. 两个向量的向量积为垂直于这两个向量的向量

## 平面及其方程

曲面：F(x,y,z)=0。曲线是两个曲面相交时相交处的线，因此连立两个曲面方程即可得到曲线的定义：
- F(x,y,z)=0
- G(x,y,z)=0

法线向量：与某个平面垂直的向量

已知一点 $M_0(x_0,y_0,z_0)$ 和法线向量n=(A,B,C)。设另一个点M(x,y,z)，连接 $M_0$ 和M即得到向量 $M_0M=(x-x_0,y-y_0,z-z_0)$ 。需满足 $n\*M_0M=0$ 。则 $A(x-x_0)+B(y-y_0)+C(z-z_0)=0$ 为平面的点法式方程

平面的一般方程：Ax+By+Cz+D=0。得到平面上的三个点后，可以将x，y，z分别代入得到三个方程，然后尝试将A，B，C均用D来表示。最后再把得到的A，B，C代回去，整体除以D。虽然是三个方程4个未知数，但通常都可以解出来。也可以用克莱姆法则

## 平面的一般方程

平面的一般方程：Ax+By+Cz+D=0。可以理解成法线的坐标表示分别为(A,B,C),A为向量在x轴上的投影，B为向量在y轴上的投影，C为向量在z轴上的投影。有以下几种情况：
1. D=0，说明平面过原点
2. A=0，说明平面平行于x轴，法线垂直于x轴
3. A=B=0，则 $Z=-\frac{D}{C}$ 。则平面过Z点且平行于x轴和y轴

平面的截距式： $\frac{x}{a}+\frac{y}{b}+\frac{z}{c}=1$ ，a，b，c分别为截距。这个平面过点(a,0,0),(0,b,0),(0,0,c)。二维平面的线也有类似性质。若一条线过(0,3)和(2,0)，则该线的方程为 $\frac{x}{2}+\frac{y}{3}=1$

## 两平面的夹角

两个平面的夹角公式： $\cos\theta=\frac{|A_1A_2+B_1B_2+C_1C_2|}{\sqrt{A_1^2+B_1^2+C_1^2}\sqrt{A_2^2+B_2^2+C_2^2}}$ ,A，B，C分别为法线向量的分量。一些结论：
1. 两平面垂直： $A_1A_2+B_1B_2+C_1C_2=0$
2. 两平面平行（重合）： $\frac{A_1}{A_2}=\frac{B_1}{B_2}=\frac{C_1}{C_2}$

有点 $P_0(x_0,y_0,z_0)$ 和平面Ax+By+Cz+D=0，则该点与平面的垂直距离为 $d=\frac{|Ax_0+By_0+Cz_0+D|}{\sqrt{A^2+B^2+C^2}}$

## 空间直线及其方程

空间直线的一般方程：
- $A_1x+B_1y+C_1z+D_1=0$
- $A_2x+B_2y+C_2z+D_2=0$

其实就是连立两个平面的方程，两个平面的交点所组成的线就是空间里的直线

对称式方程：首先要知道与某条直线平行的向量叫做其方向向量。那么在给定一个点 $M_0(x_0,y_0,z_0)$ 以及与之共线的另一个点M(x,y,z)后，有向量 $M_0M=(x-x_0,y-y_0,z-z_0)$ 。与向量平行的另一个向量称为S=(m,n,p)。根据“两个向量平行对应分量成比例”的性质，得到空间直线的对称式方程： $\frac{x-x_0}{m}=\frac{y-y_0}{n}=\frac{z-z_0}{p}=t$ 。m，n，p称为该直线的方向数；S的方向余弦也叫这个直线的方向余弦。如果尝试把x，y，z用t来表示，这个方程就能变形为参数方程：
- $x=x_0+mt$
- $y=y_0+nt$
- $z=z_0+pt$

## 两直线的夹角&直线与平面的夹角

两直线的夹角等于其方向向量的夹角。而方向向量的夹角的公式与结论均与两平面的夹角相同

直线与平面的夹角等于直线与其在平面上的投影的夹角。不难看出这条直线与投影的夹角和这条直线与平面的法线向量的夹角是互余关系。所以有 $\sin\theta=\frac{|Am+Bn+Cp|}{\sqrt{A^2+B^2+C^2}\sqrt{m^2+n^2+p^2}}$ (A,B,C)为法线向量，(m,n,p)为直线的方向向量。结论：
1. 直线垂直于平面（平行于法线）： $\frac{A}{m}=\frac{B}{n}=\frac{C}{p}$
2. 直线平行于平面：Am+Bn+Cp=0

## 杂例

平面束：想象一条在某个平面A上的直线。如果要画另一个平面B，使平面B与平面A相交形成那条直线，有多少种不同的平面B？无穷多个，这些平面构成的整体就是平面束。方程为 $A_1x+B_1y+C_1z+D_1+\lambda(A_2x+B_2y+C_2z+D_2)=0$ 。不同的 $\lambda$ 可确定不同的平面（所以只要 $\lambda$ 这就是个平面的方程， $\lambda$ 不固定的整体才是平面束）

## 曲面及其方程

球面：若球心为 $M_0(x_0,y_0,z_0)$ ,则围绕该球心所形成的半径为R的球面的方程为 $(x-x_0)^2+(y-y_0)^2+(z-z_0)^2=R^2$ 。球面的三元二次方程： $Ax^2+Ay^2+Az^2+Dx+Ey+Fz+G=0$

## 旋转曲面

yoz平面上有曲线,方程为f(y,z)=0。假如将这个曲线绕z轴转一圈，考虑曲线上的一点 $M_1(0,y_1,z_1)$ 所形成的圆和圆上另外一点M(x,y,z)。z值表示与z轴的距离，而它是个圆，半径是固定的，所以有 $z=z_1$ ,其半径为 $d=\sqrt{x^2+y^2}=|y_1|$ 。 $y_1$ 正负都有可能，因此方程为 $\pm\sqrt{x^2+y^2}$ 。此时就有了该曲线的旋转曲面方程: $f(\pm\sqrt{x^2+y^2},z)=0$ 。同理，绕y轴的旋转曲面方程为 $f(y,\pm\sqrt{x^2+z^2})=0$

根据规律，总结出xoy平面和xoz平面的旋转曲面方程：
- xoy平面:f(x,y)=0
    - 绕x轴： $f(x,\pm\sqrt{y^2+z^2})=0$
    - 绕y轴： $f(\pm\sqrt{x^2+z^2},y)=0$
- xoz平面:f(x,z)=0
    - 绕x轴： $f(x,\pm\sqrt{y^2+z^2})=0$
    - 绕y轴： $f(\pm\sqrt{x^2+y^2},z)=0$

圆锥面：一条直线围绕另一条与之相交的直线旋转一周所形成的面就叫圆锥面。圆锥面的顶点即为两条直线相交点，半顶角为两条直线相交处所形成的角。圆锥面的方程为 $z^2=\cot^2\alpha(x^2+y^2)$ , $\alpha$ 为半顶角角度

## 柱面

将一个圆（准线）沿着一条线（母线）移动，整体就形成了柱面。如果移动的是抛物线，就叫抛物柱面

## 二次曲面

若F(x,y,z)是三元二次方程，则表示的曲面为二次曲面。一些方程：
- 椭圆锥面： $\frac{x^2}{a^2}+\frac{y^2}{b^2}=z^2$ 。当z取不同值与椭圆锥面相切时，会得到椭圆。这叫做截痕
- 椭球面： $\frac{x^2}{a^2}+\frac{y^2}{b^2}+\frac{z^2}{c^2}=1$ 。如果a=b=c，就是球面
- 单叶双曲面： $\frac{x^2}{a^2}+\frac{y^2}{b^2}-\frac{z^2}{c^2}=1$
- 双叶双曲面： $\frac{x^2}{a^2}+\frac{y^2}{b^2}-\frac{z^2}{c^2}=-1$
- 椭圆抛物面： $\frac{x^2}{a^2}+\frac{y^2}{b^2}=z$
- 双曲抛物面(马鞍面)： $\frac{x^2}{a^2}-\frac{y^2}{b^2}=z$

伸缩：拿二维的圆方程举例， $x^2+y^2=1$ 。沿某个轴伸缩n倍，就把对应的变量乘上 $\frac{1}{n}$ 。如沿y轴伸缩2倍，方程就变成了 $x^2+\frac{y^2}{4}=1$

## 空间曲线及其方程

空间曲线的一般方程：
- F(x,y,z)=0
- G(x,y,z)=0

类似空间直线，连立两个方程然后相切。或者用参数方程分别表示x，y，z：
- x=x(t)
- y=y(t)
- z=z(t)

圆柱螺旋线的参数方程： https://baike.baidu.com/item/%E5%9C%86%E6%9F%B1%E8%9E%BA%E6%97%8B%E7%BA%BF/5342434

空间曲线在xoy平面上的投影：
- H(x,y)=0
- z=0

其实就是把空间曲线的一般方程消去z后然后固定z=0

## 多元函数的基本概念——平面点集

坐标平面： $R^2=R\times R=$ { $(x,y)|x,y\in R$ }

领域：到指定点距离小于指定半径的所有点集合。 $U(P_0,\delta)=$ { $P||PP_0|$ < $\delta$ }, $P_0$ 为指定点， $\delta$ 为指定半径

去心邻域： $U^{\circ}(P_0,\delta)=$ { 0 < $|PP_0|$ < $\delta$ }

内点：以内点为制定点，总存在一个邻域，使得该邻域完全包含在某个集合E里。外点的定义与之相反。边界点则是邻域一部分在集合里，一部分在集合外。集合E的边界点记为 $\partial E$

聚点：任何半径 $\forall\delta$ > 0， $U^{\circ}(P,\delta)$ 总有E中的点。P就为聚点

开集：不包含边界点。闭集与之相反

连通集：任给集合中两点，可以用折线连接起来

区域（开区域）：连通的开集。闭区域额外需要包含边界上的点

有界集：集合有界。无界则与之相反

## 多元函数的极限

二元（二重）极限：当 $(x,y)\rightarrow(x_0,y_0),f(x,y)\rightarrow A$ 。则说 $lim_{(x,y)\rightarrow(x_0,y_0)}=A$ 。注意一元函数逼近只有两个方向，而二元函数所构成的是曲面，逼近一个点有无数种方式。所谓二重极限存在，是指P以任意方式逼近 $P_0$ 点。如果P是以某种方式逼近的，无法判断极限是否存在。反过来，如果以不同方式逼近一个点，极限不相等或者有的存在有的不存在，可以判断该点极限一定不存在。至于逼近方式，随意取，方便做题即可。比如y=x或者y=-x

求极限可以套之前一元极限的做法，比如等价替换照常用。不过洛必达只能用在一元

## 偏导数

z=f(x,y)，对x的偏导数就是固定y，然后用一元函数导数的定义即可：
- y固定在 $y_0$ ，此时z可以看作是单纯x的函数了，因为y已固定，不影响函数
- x在 $x_0$ 处有 $\Delta x$
- $lim_{\Delta x\rightarrow 0}\frac{f(x_0+\Delta x,y_0)-f(x_0,y_0)}{\Delta x}$
- 偏导数的三种符号： $\frac{\partial z}{\partial x}|_{x=x_0,y=y_0}$ , $Z'_x|_{x=x_0,y=y_0}$ , $f'_x(x_0,y_0)$

对y的偏导数与对x的偏导数类似，只是固定变量的不同而已。规律适用于n元函数，求哪个变量的偏导数就把其余变量看作常数。求偏导也不难，假如是求x的偏导，就把y看作常数，按照之前的做法对x求导即可

偏导数几何含义：在空间上的一点沿 $(x_0,y_0)$ 的切面形成的曲线的切线的斜率。若该曲线连续，则偏导存在；但偏导存在不一定在 $(x_0,y_0)$ 处连续

## 全微分

偏增量： $\Delta Z_x=f(x_0+\Delta x,y_0)-f(x_0,y_0)$ ，就是上节课学的固定一个变量然后改另一个变量

全增量： $\Delta Z=f(x_0+\Delta x,y_0+\Delta y)-f(x_0,y_0)$ ，两个都改变即为全增量

全微分定义：z=f(x,y)在点(x,y)处某邻域内有定义；并在点(x,y)处产生 $\Delta x,\Delta y$ 。若全增量 $\Delta Z$ 可写成 $\Delta Z=A\Delta x+B\Delta y+o(\rho)$ ( $o(\rho)$ 为 $\rho$ 的高阶无穷小； $\rho=\sqrt{(\Delta x)^2+(\Delta y)^2}$ ,是点 $(x_0+\Delta x,y_0+\Delta y)$ 到点 $(x_0,y_0)$ 的距离;A和B是x，y的函数，与 $\Delta x,\Delta y$ 无关)，就叫函数z可微， $dz=A\Delta x+B\Delta y$ 为z的全微分（扔掉 $o(\rho)$ ）

可微的必要条件：若z=f(x,y)在点(x,y)处可微，则偏导数 $f'_x(x,y)$ 和 $f'_y(x,y)$ 存在，且 $dz=f'_x(x,y)\Delta x+f'_y(x,y)\Delta y$ 。很明显 $f'_x(x,y)$ 和 $f'_y(x,y)$ 对应原先定义里的A和B。偏导数存在是可微的必要不充分条件

可微的充分条件：z=f(x,y)在点(x,y)处的某个邻域内有连续的偏导数 $f'_x(x,y)$ 和 $f'_y(x,y)$ ，则函数z在(x,y)处可微。 $dz=f'_x(x,y)dx+f'_y(x,y)dy$ ,将 $f'_x(x,y)dx$ 记做 $d_xZ$ ,叫做关于x的偏微分； $f'_y(x,y)dy$ 记做 $d_yZ$ ，叫做关于y的偏微分。全微分又能写成 $dZ=d_xZ+d_yZ$ ，所有偏微分相加得到的就是全微分，n元函数也是这样

可以用dZ近似 $\Delta Z$ (差距为一个 $o(\rho)$ )，变形一下就是 $f(x_0+\Delta x,y_0+\Delta y)\approx f(x_0,y_0)+f'_x(x_0,y_0)\Delta x+f'_y(x_0,y_0)\Delta y$ ,该公式常用于近似计算

## 多元复合函数求导（理论讲解）

若 $z=f(u,v),u=\phi(t),v=\psi(t)$ ，则 $\frac{dz}{dt}=\frac{\partial z}{\partial u}\frac{du}{dt}+\frac{\partial z}{\partial v}\frac{dv}{dt}$

若 $z=f(u,v),u=\phi(x,y),v=\psi(x,y)$ ，则 $\frac{\partial z}{\partial x}=\frac{\partial z}{\partial u}\frac{\partial u}{\partial x}+\frac{\partial z}{\partial v}\frac{\partial v}{\partial x},\frac{\partial z}{\partial y}=\frac{\partial z}{\partial u}\frac{\partial u}{\partial y}+\frac{\partial z}{\partial v}\frac{\partial v}{\partial y}$

n元的这么累加下去就行，如 $z=f(u,v,w),u=\phi(x,y),v=\psi(x,y),w=\omega(x,y)$ ，则 $\frac{\partial z}{\partial x}=\frac{\partial z}{\partial u}\frac{\partial u}{\partial x}+\frac{\partial z}{\partial v}\frac{\partial v}{\partial x}+\frac{\partial z}{\partial w}\frac{\partial w}{\partial x},\frac{\partial z}{\partial y}=\frac{\partial z}{\partial u}\frac{\partial u}{\partial y}+\frac{\partial z}{\partial v}\frac{\partial v}{\partial y}+\frac{\partial z}{\partial w}\frac{\partial w}{\partial y}$

还有一种情况，就是某个中间函数只有一个变量。 $z=f(u,v),u=\phi(x,y),v=\psi(y)$ ，则 $\frac{\partial z}{\partial x}=\frac{\partial z}{\partial u}\frac{\partial u}{\partial x},\frac{\partial z}{\partial y}=\frac{\partial z}{\partial u}\frac{\partial u}{\partial y}+\frac{\partial z}{\partial v}\frac{dv}{dy}$

若 $z=f(u,x,y),u=\phi(x,y)$ ，则 $\frac{\partial z}{\partial x}=\frac{\partial f}{\partial u}\frac{\partial u}{\partial x}+\frac{\partial f}{\partial x},\frac{\partial z}{\partial y}=\frac{\partial f}{\partial u}\frac{\partial u}{\partial y}+\frac{\partial f}{\partial y}$

f和z本质上是一个函数，不过在求偏导时， $\frac{\partial z}{\partial x}$ 将z看作x，y的函数；而 $\frac{\partial f}{\partial x}$ 将f视为w，x，y三个变量的函数。所以假设 $z=u^2+x^2+y^2$ ，求 $\frac{\partial f}{\partial x}$ 时固定u和y，结果是2x；而 $\frac{\partial z}{\partial x}$ 设u=x+y，代入后函数就是单纯x和y的函数了，固定y后求偏导再得到结果

可以参考课程里画图的做法记忆公式并推导出新的公式

# 隐函数求导（一个方程）

F(x,y)=0是隐函数，即没有办法用显示的方式用x将y表达出来。求导时直接两边对x求导，然后把y'解出来即可

隐函数存在定理：函数F(x,y)=0在邻域内有连续的偏导数， $F(x_0,y_0)=0$ 且 $F'_y(x_0,y_0)\not ={0}$ 。则有公式 $\frac{dy}{dx}=-\frac{F'_x}{F'_y}$ 。二阶导数则是在求出一阶导数的基础上再对x求导一次

隐函数存在定理2:函数在邻域内有连续的偏导数，且F(x,y,z)=0,z是x和y的隐函数，并满足 $F'_z(x_0,y_0,z_0)\not ={0}$ 。则公式为 $\frac{\partial z}{\partial x}=-\frac{F'_x}{F'_z}$ , $\frac{\partial z}{\partial y}=-\frac{F'_y}{F'_z}$ 。二阶导数求法类似，先求出一阶偏导，然后针对求出来的式子再求偏导: $\frac{\partial}{\partial x}(\frac{\partial z}{\partial x})$

## 隐函数求导（方程组）

有方程组：
- F(x,y,u,v)=0
- G(x,y,u,v)=0

u和v均为x和y的隐函数

隐函数存在定理：如果方程组的两个函数在某邻域内对各个变量有连续的偏导数，两点带进方程组成立。则有雅可比行列式：

$$J=\frac{\partial(F,G)}{\partial(u,v)}=\begin{vmatrix}\frac{\partial F}{\partial u}&\frac{\partial F}{\partial v}\cr \frac{\partial G}{\partial u}&\frac{\partial G}{\partial v}\end{vmatrix}\not ={0}$$

结论：
- $\frac{\partial u}{\partial x}=-\frac{1}{J}\frac{\partial(F,G)}{\partial(x,v)}$

$$=-\frac{\begin{vmatrix}F'_x&F'_v\cr G'_x&G'_v\end{vmatrix}}{\begin{vmatrix}F'_u&F'_v\cr G'_u&G'_v\end{vmatrix}}$$

结论比较难记，建议看到方程组后直接两边对x求偏导，然后使用克莱姆法则得出偏导数的值

## 一元向量值函数及其导数

假如向量的三个分量x，y和z均为t的函数，则这个函数为一元向量值函数。这里自变量是一个数，因变量却是向量。那么极限和导数这些东西均要重新定义，不过差不了多少

极限： $t\rightarrow t_0,f(t)\rightarrow r_0$ ,记做 $lim_{t\rightarrow t_0}\textbf{f}(t)=\textbf{r}_0$ (粗体字母表示向量)。向量 $\textbf{f}(t)$ 有极限说明其表示三个分量的函数都有极限。函数在某点有定义则有极限： $lim_{t\rightarrow t_0}\textbf{f}(t)=\textbf{f}(t_0)$ ，其分量同理

导数（导向量）： $lim_{\Delta t\rightarrow 0}\frac{\textbf{f}(t_0+\Delta t)-\textbf{f}(t_0)}{\Delta t}$ 。在 $t_0$ 处可导的充要条件是在三个分量处都可导，本身求导向量值函数也是求导其分量

向量值函数求导法则和数量值函数一致，补充几个数量值函数没有的操作：
- 数量积： $\frac{d}{dt}[\textbf{u}(t)\*\textbf{v}(t)]=\textbf{u}'(t)\*\textbf{v}(t)+\textbf{u}(t)\*\textbf{v}'(t)$
- 向量积： $\frac{d}{dt}[\textbf{u}(t)\times\textbf{v}(t)]=\textbf{u}'(t)\times\textbf{v}(t)+\textbf{u}(t)\times\textbf{v}'(t)$
- 复合向量值函数求导： $\frac{d}{dt}\textbf{u}[\phi(t)]=\phi'(t)\textbf{u}'[\phi(t)]$ 。 $\textbf{u}[\phi(t)]$ 表示向量里的分量用嵌套函数表示：假设原本x，y和z都是u的函数，现在都是 $u(\phi(t))$ 的函数

## 空间曲线的切线与法平面

空间中有一个曲线，用参数方程表示为（ $t\in[\alpha,\beta]$ ）：
- $x=\phi(t)$
- $y=\psi(t)$
- $z=\omega(t)$

在 $t_0$ 处求导即可得到其切向量： $T=(\phi'(t_0),\psi'(t_0),\omega'(t_0))$ 。把这个向量转换为三维空间中的切线，得到 $\frac{x-x_0}{\phi'(t_0)}=\frac{y-y_0}{\psi'(t_0)}=\frac{z-z_0}{\omega'(t_0)}$ 。垂直于这条切线的直线有很多，共同构成一个法平面： $\phi'(t_0)(x-x_0)+\psi'(t_0)(y-y_0)+\omega'(t_0)(z-z_0)=0$

第二种类型的曲线如下：
- $y=\phi(x)$
- $z=\psi(x)$

其实和第一种一样，给参数方程加个x=x后套第一种方式的做法即可

第三种的曲线没有参数方程，而是靠连立两个曲面方程相交得来。可以把y和z都看成x的隐函数，方程两边同时求导，然后用克莱姆法则解处y对x和z对x的导数

## 空间曲面的切平面与法线

三维空间中有一个曲面，其在某一点不同方向的切线有无数个。这些切线共同构成了一个切平面，并有一条法线垂直于该切平面

假设曲面方程为F(x,y,z)=0。那么其切平面方程为 $F'_x(x_0,y_0,z_0)(x-x_0)+F'_y(x_0,y_0,z_0)(y-y_0)+F'_z(x_0,y_0,z_0)(z-z_0)=0$ 。法线方程为： $\frac{x-x_0}{F'_x(x_0,y_0,z_0)}=\frac{y-y_0}{F'_y(x_0,y_0,z_0)}=\frac{z-z_0}{F'_z(x_0,y_0,z_0)}$ 。弹幕里推荐的链接：[曲面的三个偏导数为什么能表示法向量？](https://www.zhihu.com/question/278342330)

第二种情况是z=f(x,y)，构造F=f(x,y)-z。其切平面方程为 $f'_x(x_0,y_0)(x-x_0)+f'_y(x_0,y_0)(y-y_0)+(z-z_0)=0$ 。法线方程为： $\frac{x-x_0}{f'_x(x_0,y_0)}=\frac{y-y_0}{f'_y(x_0,y_0)}=\frac{z-z_0}{-1}$

关键点在于要构造出F，其式子等于0

## 方向导数

偏导数固定了x或者y，意味着从两个方向考虑曲线以及其切线。但是一个曲面在某一点处的曲线应该有无数条，故引出方向导数。方向导数中的方向是起始点在 $P_0(x,_0,y_0)$ 的向量，末端为点(x,y)。假设这个向量长度为t，x的值应该为 $x=x_0+t\cos\alpha$ ，y的值应该为 $y=y_0+t\cos\beta$ 。其中 $\alpha$ 是向量与水平线的夹角， $\beta$ 与 $\alpha$ 互余。方向导数定义为 $lim_{t\rightarrow 0^+}\frac{f(x_0+t\cos\alpha,y_0+t\cos\beta)-f(x_0,y_0)}{t}=\frac{\partial f}{\partial l}|_{x_0,y_0}$

$\frac{\partial z}{\partial l}|_{(x_0,y_0)}$ 存在， $\frac{\partial z}{\partial x}|_{(x_0,y_0)}$ （ $\frac{\partial z}{\partial y}|_{(x_0,y_0)}$ ）未必存在。虽然方向导数表示某点在各个方向的导数都存在，但是注意方向导数的定义里t一定大于0，也就是只有一个方向；而偏导数要看两个方向。这就是为什么两个可能会产生分歧

f(x,y)在 $(x_0,y_0)$ 处可微，则方向导数存在且 $\frac{\partial f}{\partial l}_{(x_0,y_0)}=f'_x(x_0,y_0)\cos\alpha+f'_y(x_0,y_0)\cos\beta$

三个变量的方向导数： $\frac{\partial f}{\partial l}|_{(x_0,y_0,z_0)}=lim_{t\rightarrow 0^+}\frac{f(x_0+t\cos\alpha,y_0+t\cos\beta,z_0+t\cos\gamma)-f(x_0,y_0,z_0)}{t}$ 。同样是用偏导数求： $f'_x(x_0,y_0,z_0)\cos\alpha+f'_y(x_0,y_0,z_0)\cos\beta+f'_z(x_0,y_0,z_0)\cos\gamma$

## 梯度

可以把上节课算方向导数的公式写成向量的数量积： $(f'_x(x_0,y_0),f'_y(x_0,y_0))\*(\cos\alpha,\cos\beta)$ 。称 $gradf(x_0,y_0)=\bigtriangledown f(x_0,y_0)=(f'_x(x_0,y_0),f'_y(x_0,y_0))$

继续变形方向导数的公式，得到 $gradf(x_0,y_0)\*e_l$ , $e_l$ 表示单位化的方向向量。根据向量的数量积的公式又可以继续写成 $|gradf(x_0,y_0)||e_l|\cos\theta$ (注意 $|e_l|=1$ 所以随时可以消掉)，其中 $\theta$ 为两个向量的夹角。讨论 $\theta$ 的不同取值下 $\frac{\partial f}{\partial l}|_{(x_0,y_0)}$ 的值：
- $\theta=0:|gradf(x_0,y_0)|$ 。因为cos函数取值范围为[-1,1]，所以此时的方向导数是最大的。梯度是函数在某点的方向导数取最大值的方向
- $\theta=\pi:-|gradf(x_0,y_0)|$
- $\theta=\frac{\pi}{2}:0$ 。所以这块的函数值不变，整体构成等值线。如果把 $P_0(x_0,y_0)$ 处的梯度向量单位化： $\frac{1}{\sqrt{[f'_x(x_0,y_0)]^2,[f'_y(x_0,y_0)]^2}}(f'_x(x_0,y_0),f'_y(x_0,y_0))$ ，得到的就是函数在这点处的单位法向量。这表明函数在这点的梯度的方向就是等值线在这点的法线方向；而梯度的模就是沿这个法线方向的方向导数

## 多元函数的极值

极大值（极小值）：在邻域内最大（最小）的值。定义和一元函数一致，极大（极小）值不唯一

定理（必要条件）：z=f(x,y)。若 $(x_0,y_0)$ 处为极值且偏导存在，则 $f'_x(x_0,y_0)=0,f'_y(x_0,y_0)=0$

驻点： $f'_x=0$ 且 $f'_y=0$ 的点。具有偏导数的函数的极值点必是驻点，但函数的驻点不一定是极值点

定理（充分条件）：z=f(x,y)。 $f'_x(x_0,y_0)=0$ 且 $f'_y(x_0,y_0)=0$ 。 $(x_0,y_0)$ 是驻点，接着求 $A=f''_{xx}(x_0,y_0),B=f''_{xy}(x_0,y_0),C=f''_{yy}(x_0,y_0)$ （二阶偏导数， $f''_{xx}$ 表示对x求出一阶偏导数后再对x求一次， $f''_{xy}$ 表示对x求出一阶偏导数后再对y求一次）,结论：
1. $AC-B^2$ > 0，此点为极值
- A < 0,极大值
- A > 0，极小值
2. $AC-B^2$ < 0,没有极值
3. $AC-B^2=0$ ,无法判断

## 数量场向量场

数量场：空间上任意一点M都对应一个数f(M)，这些数字整体组成数量场

向量场：空间上任意一点M都对应一个向量F(M)=(P(M),Q(M),R(M))，这些向量整体组成向量场

如果向量场是数量场的梯度，则f(M)是F(M)的势函数，F(M)叫一个势场，也叫引力场，引力势。任何一个向量场并不一定是势场

## 多元函数的最值

最值可能出现的点：
- 驻点
- 偏导不存在的点
- 端点

## 条件极值 拉格朗日乘数法

有函数z=f(x,y)，要求在满足 $\phi(x,y)=0$ 的x和y中选极值。这种就叫条件极值， $\phi(x,y)=0$ 为条件

求条件极值点可以用拉格朗日乘数法。当得到函数z=f(x,y)和其条件 $\phi(x,y)=0$ 后，构造辅助函数 $L(x,y)=f(x,y)+\lambda\phi(x,y)$ ，然后构造方程组：
- $L'_x=0$
- $L'_y=0$

$\lambda$ 叫拉格朗日乘子。将方程组加上约束条件并展开：
- $f'_x+\lambda\phi'_x=0$
- $f'_y+\lambda\phi'_y=0$
- $\phi(x,y)=0$

假如是四个变量的函数，两个约束条件，做法则要根据规律变形。比如u=f(x,y,z,t)，条件为 $\phi(x,y,z,t)=0,\psi(x,y,z,t)=0$ 。构造 $L=f(x,y,z,t)+\lambda\phi(x,y,z,t)+\mu\psi(x,y,z,t)$ 。然后方程组记得对四个变量求偏导：
- $L'_x=0$
- $L'_y=0$
- $L'_z=0$
- $L'_t=0$
- $\phi(x,y,z,t)=0$
- $\psi(x,y,z,t)=0$